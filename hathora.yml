# Hathora Configuration for TurfLoot
appName: turfloot
authConfiguration:
  anonymous:
    separator: "-"
  # You can also use external auth with your Privy system
build:
  commands:
    - yarn install
    - yarn build
  
# Dockerfile configuration - Clean Node.js 18 build without uWebSockets.js
dockerfile: |
  FROM node:18-alpine
  WORKDIR /app
  
  # Copy minimal package.json first
  COPY hathora-package.json package.json
  COPY yarn.lock ./
  RUN yarn install --frozen-lockfile --production
  
  # Copy only required files
  COPY hathora-server.js ./
  COPY lib/ ./lib/
  COPY .env* ./
  
  EXPOSE 4000
  CMD ["node", "hathora-server.js"]

# Global regions for low latency worldwide including Oceania
regions:
  - seattle        # US West
  - washington-dc  # US East  
  - london         # Europe West
  - frankfurt      # Europe Central
  - mumbai         # Asia South
  - singapore      # Asia Southeast
  - tokyo          # Asia East
  - sydney         # Oceania (Australia/New Zealand)

# Room configuration
roomsPerProcess: 20
maxPlayersPerRoom: 20

# Resource allocation
resources:
  planName: "standard-2x"  # Adjust based on your needs

# Environment variables (will be set in Hathora dashboard)
env:
  - name: NODE_ENV
    value: production
  - name: HATHORA_PORT
    value: "4000"