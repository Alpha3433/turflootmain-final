"use strict";(()=>{var e={};e.id=8735,e.ids=[8735],e.modules={38013:e=>{e.exports=require("mongodb")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},40140:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>c});var r={};o.r(r),o.d(r,{GET:()=>d});var n=o(49303),s=o(88716),a=o(60670),i=o(87070),p=o(38013);async function d(){try{let e=new p.MongoClient(process.env.MONGO_URL);await e.connect();let t=e.db("turfloot").collection("game_sessions"),o=new Date(Date.now()-6e5),r=new Date,n=await t.find({}).toArray(),s=await t.find({lastActivity:{$gte:o}}).toArray();return await e.close(),i.NextResponse.json({tenMinutesAgo:o.toISOString(),now:r.toISOString(),totalSessions:n.length,recentSessions:s.length,sampleSessions:n.slice(0,3).map(e=>({roomId:e.roomId,lastActivity:e.lastActivity,mode:e.mode}))})}catch(e){return i.NextResponse.json({error:e.message},{status:500})}}let u=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/test-db/route",pathname:"/api/test-db",filename:"route",bundlePath:"app/api/test-db/route"},resolvedPagePath:"/app/frontend/app/api/test-db/route.js",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:c,serverHooks:m}=u,g="/api/test-db/route";function v(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:c})}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[8948,5972],()=>o(40140));module.exports=r})();