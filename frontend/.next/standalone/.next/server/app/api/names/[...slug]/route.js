"use strict";(()=>{var e={};e.id=4776,e.ids=[4776],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},88493:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>x,patchFetch:()=>y,requestAsyncStorage:()=>g,routeModule:()=>h,serverHooks:()=>f,staticGenerationAsyncStorage:()=>N});var t={};r.r(t),r.d(t,{GET:()=>p,OPTIONS:()=>c,POST:()=>m});var a=r(49303),o=r(88716),n=r(60670),u=r(87070);let i=new Map,l=new Map,d={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"};async function c(){return new Response(null,{status:200,headers:d})}async function m(e,{params:s}){let{slug:r}=s,t=r?.[0]||"update";try{let s=await e.json();if(console.log(`üìù Names API - ${t}:`,s),"update"===t){let{userId:e,customName:r,privyId:t,email:a}=s;if(!e)return u.NextResponse.json({error:"userId is required"},{status:400,headers:d});if(!r||"string"!=typeof r||r.length<1||r.length>20)return u.NextResponse.json({error:"customName must be a string between 1 and 20 characters"},{status:400,headers:d});let o={userId:e,customName:r.trim(),privyId:t||e,email:a||null,updatedAt:new Date().toISOString(),source:"names_api"};return i.set(e,o),l.has(e)||l.set(e,[]),l.get(e).push({name:r.trim(),timestamp:new Date().toISOString()}),console.log(`‚úÖ Name stored for ${e}: "${r.trim()}"`),console.log(`üìä Total names stored: ${i.size}`),u.NextResponse.json({success:!0,message:"Name stored successfully",customName:r.trim(),userId:e,timestamp:new Date().toISOString(),storage:"in_memory_reliable"},{headers:d})}if("batch-sync"!==t)return u.NextResponse.json({error:"Invalid action"},{status:400,headers:d});{let{names:e}=s;if(!Array.isArray(e))return u.NextResponse.json({error:"names must be an array"},{status:400,headers:d});let r=0;for(let s of e)s.userId&&s.customName&&(i.set(s.userId,{...s,updatedAt:new Date().toISOString(),source:"batch_sync"}),r++);return console.log(`‚úÖ Batch synced ${r} names`),u.NextResponse.json({success:!0,syncedCount:r,totalStored:i.size},{headers:d})}}catch(e){return console.error("‚ùå Names API error:",e),u.NextResponse.json({error:"Internal server error"},{status:500,headers:d})}}async function p(e,{params:s}){let{slug:r}=s,t=r?.[0]||"get",a=new URL(e.url);try{if("get"===t){let e=a.searchParams.get("userId");if(!e)return u.NextResponse.json({error:"userId parameter is required"},{status:400,headers:d});let s=i.get(e);if(s)return console.log(`üìñ Retrieved name for ${e}: "${s.customName}"`),u.NextResponse.json({success:!0,...s},{headers:d});return u.NextResponse.json({error:"Name not found"},{status:404,headers:d})}if("search"===t){let e=a.searchParams.get("q"),s=a.searchParams.get("userId");if(!e||e.length<2)return u.NextResponse.json({users:[],message:"Query must be at least 2 characters"},{headers:d});let r=[];for(let[t,a]of i.entries())t!==s&&a.customName.toLowerCase().includes(e.toLowerCase())&&r.push({id:t,username:a.customName,updatedAt:a.updatedAt,source:"names_api"});return console.log(`üîç Search "${e}" found ${r.length} users`),u.NextResponse.json({users:r.slice(0,10),total:r.length},{headers:d})}if("all"===t){let e=Array.from(i.entries()).map(([e,s])=>({userId:e.substring(0,20)+"...",customName:s.customName,updatedAt:s.updatedAt}));return u.NextResponse.json({totalNames:i.size,names:e},{headers:d})}{if("history"!==t)return u.NextResponse.json({error:"Invalid action"},{status:400,headers:d});let e=a.searchParams.get("userId");if(e&&l.has(e))return u.NextResponse.json({history:l.get(e)},{headers:d});return u.NextResponse.json({history:[]},{headers:d})}}catch(e){return console.error("‚ùå Names API GET error:",e),u.NextResponse.json({error:"Internal server error"},{status:500,headers:d})}}let h=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/names/[...slug]/route",pathname:"/api/names/[...slug]",filename:"route",bundlePath:"app/api/names/[...slug]/route"},resolvedPagePath:"/app/frontend/app/api/names/[...slug]/route.js",nextConfigOutput:"standalone",userland:t}),{requestAsyncStorage:g,staticGenerationAsyncStorage:N,serverHooks:f}=h,x="/api/names/[...slug]/route";function y(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:N})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[8948,5972],()=>r(88493));module.exports=t})();