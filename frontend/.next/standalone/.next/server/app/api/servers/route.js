"use strict";(()=>{var e={};e.id=6222,e.ids=[6222],e.modules={38013:e=>{e.exports=require("mongodb")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},12434:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>y,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>d,staticGenerationAsyncStorage:()=>c});var a={};t.r(a),t.d(a,{GET:()=>i});var s=t(49303),o=t(88716),n=t(60670),l=t(87070);async function i(e){try{console.log("\uD83C\uDFAE Colyseus Server Browser API: Returning available Colyseus servers...");let e="wss://au-syd-ab3eaf4e.colyseus.cloud",r={id:"colyseus-arena-global",roomType:"arena",name:"TurfLoot Arena",region:"Australia",regionId:"au-syd",displayName:"Global Arena",mode:"multiplayer",gameType:"Arena Battle",description:"Real-time multiplayer arena with up to 50 players",maxPlayers:50,minPlayers:1,currentPlayers:0,waitingPlayers:0,isRunning:!0,ping:null,avgWaitTime:"Join Now",difficulty:"All Players",entryFee:0,serverFee:0,totalCost:0,potentialWinning:0,prizePool:0,stake:0,status:"active",serverType:"colyseus",endpoint:e,lastUpdated:new Date().toISOString(),timestamp:new Date().toISOString(),canJoin:!0},a=0;try{let{MongoClient:e}=await Promise.resolve().then(t.t.bind(t,38013,23)),r=new e(process.env.MONGO_URL);await r.connect();let s=r.db("turfloot").collection("game_sessions");a=await s.countDocuments({roomId:"colyseus-arena-global",status:"active",lastActivity:{$gte:new Date(Date.now()-12e4)}}),console.log(`ðŸ“Š Colyseus Arena: ${a} real players from database`),await r.close()}catch(e){console.warn(`âš ï¸ Could not query database for Colyseus arena:`,e.message),a=0}r.currentPlayers=a,r.status=a>0?"active":"waiting",r.avgWaitTime=a>0?"Join Now":"Waiting for players";let s=[r];return console.log(`ðŸ“Š Returning Colyseus arena server with ${a} players`),l.NextResponse.json({servers:s,totalPlayers:a,totalActiveServers:a>0?1:0,totalServers:1,practiceServers:0,cashServers:0,regions:["Global"],gameTypes:[{name:"Arena Battle",servers:1}],colyseusEnabled:!0,colyseusEndpoint:e,lastUpdated:new Date().toISOString(),timestamp:new Date().toISOString()})}catch(e){return console.error("âŒ Error in Colyseus server browser API:",e),l.NextResponse.json({error:"Failed to fetch Colyseus servers",message:e.message,servers:[],totalPlayers:0,totalActiveServers:0,colyseusEnabled:!1},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/servers/route",pathname:"/api/servers",filename:"route",bundlePath:"app/api/servers/route"},resolvedPagePath:"/app/frontend/app/api/servers/route.js",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:c,serverHooks:d}=u,y="/api/servers/route";function v(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:c})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[8948,5972],()=>t(12434));module.exports=a})();