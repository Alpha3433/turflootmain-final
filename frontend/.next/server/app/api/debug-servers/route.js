"use strict";(()=>{var e={};e.id=2610,e.ids=[2610],e.modules={38013:e=>{e.exports=require("mongodb")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3629:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>D,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>c});var s={};o.r(s),o.d(s,{GET:()=>l});var r=o(49303),n=o(88716),a=o(60670),i=o(87070),u=o(38013);async function l(){try{let e=new u.MongoClient(process.env.MONGO_URL);await e.connect();let t=e.db("turfloot").collection("game_sessions"),o=await t.find({}).toArray();console.log("\uD83D\uDCCA Total sessions in database:",o.length);let s=new Date(Date.now()-12e4);console.log("\uD83D\uDD50 Looking for sessions newer than:",s.toISOString());let r=await t.find({lastActivity:{$gte:s},mode:{$regex:/colyseus/i}}).toArray();return console.log("\uD83D\uDD0D Database query found:",r.length,"sessions"),console.log("\uD83D\uDCDD Active sessions:",r.map(e=>({roomId:e.roomId,lastActivity:e.lastActivity,mode:e.mode,region:e.region,userId:e.userId}))),await e.close(),i.NextResponse.json({totalSessions:o.length,activeSessions:r.length,sessions:r,twoMinutesAgo:s.toISOString()})}catch(e){return console.error("âŒ Debug API Error:",e),i.NextResponse.json({error:e.message},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/debug-servers/route",pathname:"/api/debug-servers",filename:"route",bundlePath:"app/api/debug-servers/route"},resolvedPagePath:"/app/frontend/app/api/debug-servers/route.js",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:c,serverHooks:g}=d,D="/api/debug-servers/route";function v(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:c})}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>o(3629));module.exports=s})();