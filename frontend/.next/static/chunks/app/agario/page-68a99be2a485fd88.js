(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6838],{87904:function(e,t,a){Promise.resolve().then(a.bind(a,68563))},68563:function(e,t,a){"use strict";a.r(t);var i=a(57437),s=a(2265),o=a(16463);t.default=()=>{let e=(0,s.useRef)(null),t=(0,s.useRef)(null);(0,o.useRouter)(),(0,o.useSearchParams)();let[r,n]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),[p,u]=(0,s.useState)(60),[x,g]=(0,s.useState)(0),[f,y]=(0,s.useState)(20),[m,b]=(0,s.useState)(0),[w,v]=(0,s.useState)(0),[D,M]=(0,s.useState)(!1),[S,C]=(0,s.useState)(0),[P,k]=(0,s.useState)("disconnected"),R=(0,s.useRef)(null),j=(0,s.useRef)(0),E=(0,s.useRef)({dx:0,dy:0});(0,s.useRef)(null);let[I,A]=(0,s.useState)(0),[F,T]=(0,s.useState)([]),[W,z]=(0,s.useState)([]),[O,N]=(0,s.useState)(0),Y=[{id:"collect_coins_10",name:"Coin Hunter I",description:"Collect 10 coins",target:10,reward:50,icon:"\uD83E\uDE99"},{id:"collect_coins_25",name:"Coin Hunter II",description:"Collect 25 coins",target:25,reward:100,icon:"\uD83E\uDE99"},{id:"collect_coins_50",name:"Coin Master",description:"Collect 50 coins",target:50,reward:200,icon:"\uD83D\uDCB0"},{id:"reach_mass_50",name:"Growing Strong",description:"Reach 50 mass",target:50,reward:75,icon:"\uD83D\uDCAA"},{id:"reach_mass_100",name:"Heavy Weight",description:"Reach 100 mass",target:100,reward:150,icon:"\uD83C\uDFCB️"},{id:"eliminate_1",name:"First Blood",description:"Eliminate 1 enemy",target:1,reward:100,icon:"⚔️"},{id:"eliminate_3",name:"Warrior",description:"Eliminate 3 enemies",target:3,reward:250,icon:"\uD83D\uDDE1️"},{id:"survive_60",name:"Survivor",description:"Survive for 60 seconds",target:60,reward:100,icon:"⏰"},{id:"survive_120",name:"Endurance",description:"Survive for 120 seconds",target:120,reward:200,icon:"\uD83D\uDD50"}],[L,B]=(0,s.useState)(!1),[G,X]=(0,s.useState)(!1),[_,q]=(0,s.useState)({x:0,y:0}),[U,V]=(0,s.useState)(!1),[H,J]=(0,s.useState)(!1),K=(0,s.useRef)(null),[$,Z]=(0,s.useState)(!1),Q=(0,s.useRef)(null);(0,s.useEffect)(()=>(H&&L&&(K.current=setTimeout(()=>{J(!1)},5e3)),()=>{K.current&&clearTimeout(K.current)}),[H,L]),(0,s.useEffect)(()=>($&&L&&(Q.current=setTimeout(()=>{Z(!1)},5e3)),()=>{Q.current&&clearTimeout(Q.current)}),[$,L]),(0,s.useRef)(new Map),(0,s.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("roomId"),a=e.get("mode"),i=e.get("multiplayer"),s=e.get("server");if(console.log("\uD83C\uDFAE HATHORA-FIRST: Game initialization - URL parameters:",{roomId:t,mode:a,multiplayer:i,server:s,hathoraRoom:e.get("hathoraRoom"),url:window.location.href}),"practice"===a&&"global-practice-bots"===t){console.log("✅ PRACTICE MODE: Allowing local practice with bots"),M(!1),n(!0);return}console.log("\uD83C\uDFAE Colyseus multiplayer game starting..."),console.log("\uD83D\uDCCA Game parameters:"),console.log("  - roomId:",t||"will-be-generated"),console.log("  - server:",s||"colyseus"),console.log("  - mode:",a,"isNotLocal:","local"!==a),console.log("✅ PROCEEDING: Colyseus multiplayer enabled"),console.log("\uD83C\uDFE0 Room ID:",t||"will-be-generated"),console.log("\uD83C\uDF10 Multiplayer mode:",i),console.log("\uD83D\uDDA5️ Server type:",s||"colyseus"),M(!0),n(!0),console.log("\uD83C\uDFAE Colyseus multiplayer game ready"),ee(t,0,a,"colyseus"),console.log("\uD83C\uDFAE Setting up client-side prediction with Colyseus state sync"),console.log("⚡ Colyseus server will handle all game logic"),console.log("\uD83D\uDCE1 Client will send inputs, receive state updates via Schema")},[]);let ee=async(e,t,a,i)=>{try{console.log("\uD83D\uDCCA Tracking player session (fallback):",{roomId:e,fee:t,mode:a,region:i});let s={action:"join",session:{roomId:e,joinedAt:new Date().toISOString(),lastActivity:new Date().toISOString(),userId:"fallback_"+Math.random().toString(36).substr(2,9),entryFee:t||0,mode:a||"unknown",region:i||"unknown",isRealHathoraRoom:!1,fallbackSession:!0}},o=await fetch("/api/game-sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});o.ok?console.log("✅ Fallback session tracked successfully"):console.warn("⚠️ Failed to track fallback session:",o.status)}catch(e){console.error("❌ Error tracking fallback session:",e)}},et=(0,s.useRef)(null),ea=(0,s.useRef)(null),[ei,es]=(0,s.useState)({x:0,y:0});(0,s.useEffect)(()=>{let e=()=>{let e=window.innerHeight<=768,t=768>=Math.min(window.innerWidth,window.innerHeight),a=e||t,i=window.innerWidth/window.innerHeight,s=window.innerHeight<=500&&i>=1.5,o="ontouchstart"in window||navigator.maxTouchPoints>0,r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),n=window.innerHeight<=600||window.innerWidth<=600,l=a||s||n||o&&r;console.log("\uD83C\uDFAE IN-GAME Mobile Detection:",{heightCheck:e,smallestCheck:t,isSmallScreen:a,isMobileLandscape:s,isVerySmallScreen:n,isTouchDevice:o,isMobileUA:r,screenWidth:window.innerWidth,screenHeight:window.innerHeight,minDimension:Math.min(window.innerWidth,window.innerHeight),aspectRatio:i.toFixed(2),result:l,analogStickVisible:l?"YES":"NO"}),B(l)};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),(0,s.useEffect)(()=>{if(!L)return;let e=()=>{let e=Math.min(window.scrollY/(.5*window.innerHeight),1);es({x:2*Math.sin(e*Math.PI*2),y:Math.max(-2,Math.min(2,(e-.5)*4))})};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[L]);let eo=(e,t)=>{if(D&&R.current&&"connected"===P&&!(.01>Math.abs(e-E.current.dx)&&.01>Math.abs(t-E.current.dy))){j.current++,E.current={dx:e,dy:t};try{R.current.send("input",{seq:j.current,dx:e,dy:t})}catch(e){console.error("❌ Failed to send input to server:",e)}}},er=e=>{var a,i,s,o,r,n,l,c,d,h;if(e.preventDefault(),!L)return;console.log("\uD83D\uDD79️ Joystick Started - Mobile:",L,"Game Available:",!!(null===(a=t.current)||void 0===a?void 0:a.game)),X(!0);let p=null===(i=et.current)||void 0===i?void 0:i.getBoundingClientRect();if(!p)return;let u=p.left+p.width/2,x=p.top+p.height/2,g=e.touches?e.touches[0]:e,f=g.clientX-u,y=g.clientY-x,m=Math.min(Math.sqrt(f*f+y*y),35),b=Math.atan2(y,f);if(q({x:Math.cos(b)*m,y:Math.sin(b)*m}),console.log("\uD83D\uDD0D Debug gameRef:",{gameRefExists:!!t.current,gameRefType:typeof t.current,hasGameProperty:null===(s=t.current)||void 0===s?void 0:s.hasOwnProperty("game"),gameProperty:null===(o=t.current)||void 0===o?void 0:o.game,gameRefKeys:t.current?Object.keys(t.current):"none"}),t.current&&t.current.player){let e=m/35,a=500*e,i=t.current,s=Math.cos(b)*e,o=Math.sin(b)*e;eo(s,o);let p=i.player.x+Math.cos(b)*a,u=i.player.y+Math.sin(b)*a;console.log("\uD83D\uDD79️ Joystick START Movement:",{strength:e.toFixed(2),angle:(180*b/Math.PI).toFixed(1)+"\xb0",dx:s.toFixed(3),dy:o.toFixed(3),multiplayer:D,moveSpeed:a.toFixed(1),playerPos:{x:null===(r=i.player.x)||void 0===r?void 0:r.toFixed(1),y:null===(n=i.player.y)||void 0===n?void 0:n.toFixed(1)},targetPos:{x:p.toFixed(1),y:u.toFixed(1)},beforeUpdate:{targetX:null===(l=i.player.targetX)||void 0===l?void 0:l.toFixed(1),targetY:null===(c=i.player.targetY)||void 0===c?void 0:c.toFixed(1)}}),i.player.targetX=p,i.player.targetY=u,window.isUsingJoystick=!0,console.log("\uD83D\uDD79️ After Update:",{targetX:null===(d=i.player.targetX)||void 0===d?void 0:d.toFixed(1),targetY:null===(h=i.player.targetY)||void 0===h?void 0:h.toFixed(1)})}else console.log("⏳ Game not ready - joystick visual works but no player movement yet")},en=e=>{var a,i,s,o,r,n,l,c,d;if(e.preventDefault(),!L||!G)return;let h=null===(a=et.current)||void 0===a?void 0:a.getBoundingClientRect();if(!h)return;let p=h.left+h.width/2,u=h.top+h.height/2,x=e.touches?e.touches[0]:e,g=x.clientX-p,f=x.clientY-u,y=Math.min(Math.sqrt(g*g+f*f),35),m=Math.atan2(f,g);if(q({x:Math.cos(m)*y,y:Math.sin(m)*y}),console.log("\uD83D\uDD0D Debug gameRef:",{gameRefExists:!!t.current,gameRefType:typeof t.current,hasGameProperty:null===(i=t.current)||void 0===i?void 0:i.hasOwnProperty("game"),gameProperty:null===(s=t.current)||void 0===s?void 0:s.game,gameRefKeys:t.current?Object.keys(t.current):"none"}),t.current&&t.current.player){let e=y/35,a=500*e,i=t.current,s=Math.cos(m)*e,h=Math.sin(m)*e;eo(s,h);let p=i.player.x+Math.cos(m)*a,u=i.player.y+Math.sin(m)*a;console.log("\uD83D\uDD79️ Joystick Movement:",{strength:e.toFixed(2),angle:(180*m/Math.PI).toFixed(1)+"\xb0",dx:s.toFixed(3),dy:h.toFixed(3),multiplayer:D,moveSpeed:a.toFixed(1),playerPos:{x:null===(o=i.player.x)||void 0===o?void 0:o.toFixed(1),y:null===(r=i.player.y)||void 0===r?void 0:r.toFixed(1)},targetPos:{x:p.toFixed(1),y:u.toFixed(1)},beforeUpdate:{targetX:null===(n=i.player.targetX)||void 0===n?void 0:n.toFixed(1),targetY:null===(l=i.player.targetY)||void 0===l?void 0:l.toFixed(1)}}),i.player.targetX=p,i.player.targetY=u,window.isUsingJoystick=!0,console.log("\uD83D\uDD79️ After Update:",{targetX:null===(c=i.player.targetX)||void 0===c?void 0:c.toFixed(1),targetY:null===(d=i.player.targetY)||void 0===d?void 0:d.toFixed(1)})}else console.log("⏳ Game not ready - joystick visual works but no player movement yet")},el=e=>{var a,i,s,o;if(e.preventDefault(),L){if(console.log("\uD83D\uDD79️ Joystick Ended - Stopping Movement"),X(!1),q({x:0,y:0}),null===(i=t.current)||void 0===i?void 0:null===(a=i.game)||void 0===a?void 0:a.player){let e=t.current.game;e.player.targetX=e.player.x,e.player.targetY=e.player.y,console.log("\uD83D\uDD79️ Player movement stopped at:",{x:null===(s=e.player.x)||void 0===s?void 0:s.toFixed(1),y:null===(o=e.player.y)||void 0===o?void 0:o.toFixed(1)})}window.isUsingJoystick=!1}};(0,s.useEffect)(()=>{window.isMobileDevice=L,window.isUsingJoystick=!1},[L]);let ec=(e,t)=>{z(a=>a.map(a=>{if(a.completed)return a;let i=a.progress,s=!1;switch(e){case"coin_collected":a.id.includes("collect_coins")&&(s=(i=Math.min(a.progress+t,a.target))>=a.target);break;case"mass_reached":a.id.includes("reach_mass")&&(s=(i=Math.max(a.progress,t))>=a.target);break;case"elimination":a.id.includes("eliminate")&&(s=(i=Math.min(a.progress+t,a.target))>=a.target);break;case"survival_time":a.id.includes("survive")&&(s=(i=t)>=a.target)}return s&&!a.completed?(A(e=>e+a.reward),{...a,progress:i,completed:!0}):{...a,progress:i}}))};(0,s.useEffect)(()=>{if(r&&0===W.length){let e=new URLSearchParams(window.location.search),t=e.get("fee"),a=e.get("mode");t&&parseFloat(t)>0&&"local"!==a&&"practice"!==a&&z([...Y].sort(()=>.5-Math.random()).slice(0,3).map(e=>({...e,progress:0,completed:!1})))}},[r]),(0,s.useEffect)(()=>{if(!r)return;(async()=>{try{let e=new URLSearchParams(window.location.search),t=e.get("roomId"),a=e.get("fee"),i=e.get("mode"),s=e.get("region");if(!t){console.log("\uD83D\uDEAB No roomId found - not tracking session");return}if(!("local"!==i&&"practice"!==i)){console.log("\uD83D\uDEAB Local/practice game - not tracking session");return}console.log("\uD83C\uDFAF Tracking real player session:",{roomId:t,fee:a||0,mode:i,region:s});let o={roomId:t,entryFee:parseFloat(a)||0,mode:i,region:s,joinedAt:new Date().toISOString(),lastActivity:new Date().toISOString(),status:"active"},r=await fetch("/api/game-sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"join",session:o})});r.ok?console.log("✅ Player session recorded successfully"):console.warn("⚠️ Failed to record player session:",r.status)}catch(e){console.error("❌ Error tracking player session:",e)}})();let e=setInterval(()=>{let e=new URLSearchParams(window.location.search),t=e.get("roomId"),a=e.get("mode");t&&"local"!==a&&"practice"!==a&&fetch("/api/game-sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",roomId:t,lastActivity:new Date().toISOString()})}).catch(e=>console.warn("⚠️ Failed to update session activity:",e))},3e4);return()=>{clearInterval(e);let t=new URLSearchParams(window.location.search),a=t.get("roomId"),i=t.get("mode");a&&"local"!==i&&"practice"!==i&&fetch("/api/game-sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"leave",roomId:a})}).catch(e=>console.warn("⚠️ Failed to record session leave:",e))}},[r]),(0,s.useEffect)(()=>{r&&(async()=>{try{console.log("\uD83C\uDF10 Initializing Colyseus room connection...");let i=new URLSearchParams(window.location.search),s=i.get("mode"),o=i.get("multiplayer"),r=i.get("server");if(console.log("\uD83D\uDD0D URL parameters:",{mode:s,multiplayer:o,server:r}),"local"===s||"practice"===s||r&&"colyseus"!==r){console.log("\uD83D\uDEAB Not a Colyseus multiplayer room - skipping WebSocket connection");return}M(!0),C(1);let{joinArena:n}=await Promise.all([a.e(1615),a.e(9109),a.e(2609),a.e(4507)]).then(a.bind(a,4507)),l=null,c=null;try{var e;let{usePrivy:t}=await Promise.all([a.e(2707),a.e(7572),a.e(8061)]).then(a.bind(a,56404)),{user:i}=t();l=(null==i?void 0:i.id)||"anonymous_".concat(Date.now()),c=(null==i?void 0:i.username)||(null==i?void 0:null===(e=i.email)||void 0===e?void 0:e.split("@")[0])||null}catch(e){console.log("⚠️ Privy not available, using anonymous user"),l="anonymous_".concat(Date.now())}console.log("\uD83D\uDD11 Connecting with user:",{privyUserId:l,playerName:c});let d=await n({privyUserId:l,playerName:c});k("connected"),console.log("✅ Connected to Colyseus arena"),R.current=d,d.onStateChange(e=>{if(!e){console.log("\uD83D\uDCCA Colyseus state is null/undefined");return}let a=e.players&&(e.players.size||Object.keys(e.players).length)||0;C(a),t.current&&t.current.updateFromServer&&t.current.updateFromServer(e)}),d.onStateChange.once(e=>{e&&e.players&&(e.players.onAdd((e,t)=>{console.log("\uD83D\uDC4B Player joined: ".concat(e.name||"Unknown")),C(e=>e+1)}),e.players.onRemove((e,t)=>{console.log("\uD83D\uDC4B Player left: ".concat(t)),C(e=>Math.max(0,e-1))}))}),d.onError((e,t)=>{console.error("❌ Colyseus room error:",e,t),k("error")}),d.onLeave(e=>{console.log("\uD83D\uDC4B Left Colyseus room:",e),k("disconnected")});let h=setInterval(()=>{d&&d.connection&&d.connection.readyState===WebSocket.OPEN&&d.send("ping",{timestamp:Date.now()})},5e3);return()=>{clearInterval(h),d&&d.leave()}}catch(e){console.error("❌ Failed to connect to Colyseus server:",e),k("error")}})()},[r]),(0,s.useEffect)(()=>{if(W.length>0){let e=setInterval(()=>{N(e=>(e+1)%W.length)},4e3);return()=>clearInterval(e)}},[W.length]);let[ed,eh]=(0,s.useState)(0),[ep,eu]=(0,s.useState)(!1),[ex,eg]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t.current&&t.current.updateGameStates&&(console.log("\uD83D\uDD04 Updating game states:",{isCashingOut:ep,cashOutProgress:ed,cashOutComplete:ex,gameOver:l}),t.current.updateGameStates({isCashingOut:ep,cashOutProgress:ed,cashOutComplete:ex,gameOver:l}))},[ep,ed,ex,l]);let[ef,ey]=(0,s.useState)({playerX:2e3,playerY:2e3,enemies:[],coins:[],viruses:[]}),[em,eb]=(0,s.useState)(!1),[ew,ev]=(0,s.useState)(!1),[eD,eM]=(0,s.useState)(""),[eS,eC]=(0,s.useState)(""),[eP,ek]=(0,s.useState)("");class eR{updateFromServer(e){var t,a,i;if(!e)return;console.log("\uD83D\uDCE1 Receiving server state update:",{players:(null===(t=e.players)||void 0===t?void 0:t.size)||0,coins:(null===(a=e.coins)||void 0===a?void 0:a.size)||0,viruses:(null===(i=e.viruses)||void 0===i?void 0:i.size)||0,timestamp:e.timestamp}),this.serverState={players:[],coins:[],viruses:[],timestamp:e.timestamp||Date.now()},e.players&&e.players.forEach((e,t)=>{var a;this.serverState.players.push({sessionId:t,x:e.x,y:e.y,radius:e.radius,mass:e.mass,name:e.name,color:e.color,score:e.score,alive:e.alive,isCurrentPlayer:t===(null===(a=R.current)||void 0===a?void 0:a.sessionId)})}),e.coins&&e.coins.forEach((e,t)=>{this.serverState.coins.push({id:t,x:e.x,y:e.y,radius:e.radius,color:e.color,value:e.value})}),e.viruses&&e.viruses.forEach((e,t)=>{this.serverState.viruses.push({id:t,x:e.x,y:e.y,radius:e.radius,color:e.color})});let s=this.serverState.players.find(e=>e.isCurrentPlayer);s&&D&&(this.player.x=s.x,this.player.y=s.y,this.player.mass=s.mass,this.player.radius=s.radius,this.player.name=s.name,"function"==typeof y&&y(Math.floor(s.mass)),"function"==typeof g&&g(Math.floor(s.score)))}detectCashGame(){let e=new URLSearchParams(window.location.search),t=e.get("fee"),a=e.get("mode");return t&&parseFloat(t)>0&&"local"!==a&&"practice"!==a}getRealPlayerCount(){let e=parseFloat(new URLSearchParams(window.location.search).get("fee")||0);return 1===e?Math.floor(8*Math.random())+2:5===e?Math.floor(12*Math.random())+4:20===e?Math.floor(16*Math.random())+6:8}calculatePlayableRadius(){if(!this.isCashGame)return 1800;let e=Math.max(2,Math.min(24,this.realPlayerCount)),t=this.maxPlayableRadius-this.basePlayableRadius;return Math.floor(this.basePlayableRadius+(e-2)/22*t)}updateDynamicZone(e){if(!this.isCashGame)return;let t=Date.now();if(t-this.lastPlayerCountCheck>5e3){let e=this.getRealPlayerCount();e!==this.realPlayerCount&&(console.log("\uD83D\uDD04 Player count changed: ".concat(this.realPlayerCount," → ").concat(e)),this.realPlayerCount=e,this.targetPlayableRadius=this.calculatePlayableRadius(),console.log("\uD83C\uDFAF Zone target changed: ".concat(this.currentPlayableRadius," → ").concat(this.targetPlayableRadius))),this.lastPlayerCountCheck=t}if(Math.abs(this.currentPlayableRadius-this.targetPlayableRadius)>1){let t=this.targetPlayableRadius>this.currentPlayableRadius?1:-1,a=this.zoneTransitionSpeed*e*t;this.currentPlayableRadius+=a,t>0&&this.currentPlayableRadius>this.targetPlayableRadius?this.currentPlayableRadius=this.targetPlayableRadius:t<0&&this.currentPlayableRadius<this.targetPlayableRadius&&(this.currentPlayableRadius=this.targetPlayableRadius),console.log("\uD83D\uDD04 Zone transitioning: ".concat(Math.floor(this.currentPlayableRadius),"px"))}}initAntiCheat(){this.antiCheat.enabled&&(console.log("\uD83D\uDEE1️ Initializing comprehensive anti-cheat system..."),this.protectCriticalFunctions(),this.startIntegrityMonitoring(),this.enhanceInputMonitoring(),this.startPerformanceProfiling(),console.log("\uD83D\uDEE1️ Anti-cheat system fully initialized"))}protectCriticalFunctions(){var e=this;let t=console.log;requestAnimationFrame;let a=0;console.log=function(){for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return++a>500&&e.recordViolation("EXCESSIVE_CONSOLE_USAGE","High console.log usage detected"),t.apply(console,s)},this.protectGameVariables()}protectGameVariables(){let e=this,t=this.player.mass;Object.defineProperty(this.player,"mass",{get:()=>t,set(a){let i=t;t=a,a>4*i&&e.recordViolation("SUSPICIOUS_MASS_CHANGE","Mass jumped from ".concat(i," to ").concat(a)),a<0&&(e.recordViolation("INVALID_MASS_VALUE","Negative mass: ".concat(a)),t=20)}}),this.lastValidPosition={x:this.player.x,y:this.player.y}}startIntegrityMonitoring(){setInterval(()=>{this.antiCheat.enabled&&!this.antiCheat.banned&&(this.validateGameState(),this.analyzePlayerBehavior(),this.detectAutomation(),this.analyzeNetworkPatterns(),this.antiCheat.integrityChecks++)},2e3)}enhanceInputMonitoring(){document.addEventListener("mousemove",e=>{if(!this.antiCheat.enabled)return;let t=Date.now();this.antiCheat.mouseMovements.push({x:e.clientX,y:e.clientY,timestamp:t,deltaTime:t-this.antiCheat.lastInputTime}),this.antiCheat.mouseMovements.length>100&&this.antiCheat.mouseMovements.shift(),this.antiCheat.lastInputTime=t,this.analyzeMousePattern()}),document.addEventListener("click",e=>{this.antiCheat.enabled&&(this.antiCheat.clickPattern.push({x:e.clientX,y:e.clientY,timestamp:Date.now(),button:e.button}),this.antiCheat.clickPattern.length>50&&this.antiCheat.clickPattern.shift())}),document.addEventListener("keydown",e=>{this.antiCheat.enabled&&(this.antiCheat.keyPresses.push({key:e.key,timestamp:Date.now(),ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey}),this.antiCheat.keyPresses.length>100&&this.antiCheat.keyPresses.shift(),e.ctrlKey&&e.shiftKey&&"I"===e.key&&this.recordViolation("DEV_TOOLS_ATTEMPT","Developer tools access attempted"))})}startPerformanceProfiling(){let e=performance.now(),t=[],a=()=>{let i=performance.now(),s=i-e;if(t.push(s),t.length>60){t.shift();let e=this.calculateVariance(t);e<.1&&this.recordViolation("AUTOMATED_TIMING","Frame timing too consistent: ".concat(e))}e=i,this.running&&this.antiCheat.enabled&&requestAnimationFrame(a)};this.antiCheat.enabled&&requestAnimationFrame(a)}validateGameState(){this.player.mass<0&&(this.recordViolation("INVALID_GAME_STATE","Negative player mass"),this.player.mass=20),this.player.radius>10*this.player.mass&&this.recordViolation("INVALID_GAME_STATE","Radius-mass ratio violation");let e=this.world.width/2,t=this.world.height/2;Math.sqrt(Math.pow(this.player.x-e,2)+Math.pow(this.player.y-t,2))>this.currentPlayableRadius+100&&(this.recordViolation("POSITION_VIOLATION","Player outside valid boundaries"),this.player.x=e,this.player.y=t)}analyzePlayerBehavior(){let e=Date.now();if(this.antiCheat.massGainRate.push({mass:this.player.mass,timestamp:e}),this.antiCheat.massGainRate.length>10){this.antiCheat.massGainRate.shift();let e=this.antiCheat.massGainRate[0],t=this.antiCheat.massGainRate[this.antiCheat.massGainRate.length-1],a=(t.timestamp-e.timestamp)/1e3,i=t.mass-e.mass;i>500&&a<2&&this.recordViolation("IMPOSSIBLE_MASS_GAIN","Gained ".concat(i," mass in ").concat(a,"s"))}}detectAutomation(){if(this.antiCheat.mouseMovements.length<20)return;let e=this.antiCheat.mouseMovements.slice(-20),t=0;for(let a=2;a<e.length;a++){let i=e[a-2],s=e[a-1],o=e[a];.1>Math.abs(Math.atan2(s.y-i.y,s.x-i.x)-Math.atan2(o.y-s.y,o.x-s.x))&&t++}t>40&&(this.recordViolation("AUTOMATED_MOVEMENT","Robotic movement pattern detected: ".concat(t,"/18")),this.antiCheat.botLikeScore+=10);let a=[];for(let t=1;t<e.length;t++)a.push(e[t].deltaTime);let i=a.reduce((e,t)=>e+t,0)/a.length;i<2&&(this.recordViolation("INHUMAN_REACTION_TIME","Average reaction time: ".concat(i,"ms")),this.antiCheat.botLikeScore+=15)}analyzeNetworkPatterns(){let e=Date.now(),t=this.antiCheat.actionQueue.filter(t=>e-t.timestamp<1e3);t.length>this.antiCheat.actionRateLimit&&this.recordViolation("RATE_LIMIT_EXCEEDED","".concat(t.length," actions per second"))}analyzeMousePattern(){if(this.antiCheat.mouseMovements.length<10)return;let e=this.antiCheat.mouseMovements.slice(-10),t=0;for(let a=2;a<e.length;a++){let i=e[a-2],s=e[a-1],o=e[a];5>Math.abs((s.x-i.x)*(o.y-i.y)-(o.x-i.x)*(s.y-i.y))&&t++}t>20&&this.recordViolation("LINEAR_MOVEMENT_PATTERN","Bot-like linear movement: ".concat(t,"/8"))}recordViolation(e,t){let a=(Date.now()-this.antiCheat.gameStartTime)/1e3;if(a<10){console.log('\uD83D\uDEE1️ GRACE PERIOD: Ignoring violation "'.concat(e,'" in first 10 seconds (').concat(a.toFixed(1),"s elapsed)"));return}this.antiCheat.violations++,this.antiCheat.suspiciousActions++,console.warn("\uD83D\uDEA8 ANTI-CHEAT VIOLATION [".concat(this.antiCheat.violations,"/").concat(this.antiCheat.maxViolations,"]: ").concat(e," - ").concat(t," (Mass: ").concat(this.player.mass.toFixed(1),")")),this.reportViolation(e,t);let i=this.player.mass>200?25:this.antiCheat.maxViolations;this.antiCheat.violations>=i?(console.log("\uD83D\uDD12 PLAYER BAN TRIGGERED: ".concat(this.antiCheat.violations,"/").concat(i," violations (Mass: ").concat(this.player.mass.toFixed(1),")")),this.banPlayer()):console.log("⚠️ Violation count: ".concat(this.antiCheat.violations,"/").concat(i," (Mass: ").concat(this.player.mass.toFixed(1),")"))}banPlayer(){this.antiCheat.banned=!0,this.running=!1,console.error("\uD83D\uDD12 PLAYER BANNED: Multiple anti-cheat violations detected"),this.setCheatingBan?this.setCheatingBan(!0):(alert("⚠️ ACCOUNT SUSPENDED\n\nMultiple violations of fair play policies detected.\nContact support if you believe this is an error."),setTimeout(()=>{window.location.href="/"},3e3))}reportViolation(e,t){console.log("\uD83D\uDCCA Violation report:",{type:e,description:t,timestamp:Date.now(),playerData:{mass:this.player.mass,position:{x:this.player.x,y:this.player.y},violations:this.antiCheat.violations},gameData:{isCashGame:this.isCashGame,roomId:new URLSearchParams(window.location.search).get("roomId")}})}calculateVariance(e){let t=e.reduce((e,t)=>e+t,0)/e.length;return e.map(e=>Math.pow(e-t,2)).reduce((e,t)=>e+t,0)/e.length}generateCoins(){this.coins=[];let e=this.world.width/2,t=this.world.height/2,a=this.currentPlayableRadius;for(let i=0;i<1e3;i++){let i,s,o;do o=Math.sqrt(Math.pow((i=Math.random()*this.world.width)-e,2)+Math.pow((s=Math.random()*this.world.height)-t,2));while(o>a-20);this.coins.push({x:i,y:s,radius:8,value:5,color:"#FFD700"})}console.log("\uD83E\uDE99 Generated ".concat(this.coins.length," coins within radius ").concat(Math.floor(a),"px"))}generateEnemies(){if(this.enemies=[],D){console.log("\uD83C\uDF10 Skipping bot generation for multiplayer game - real players only!");return}if(this.isCashGame){console.log("\uD83D\uDCB0 Skipping bot generation for cash game - humans only!");return}let e=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7"],t=this.world.width/2,a=this.world.height/2,i=this.currentPlayableRadius;for(let s=0;s<8;s++){let o,r,n;let l=15+40*Math.random();do n=Math.sqrt(Math.pow((o=Math.random()*this.world.width)-t,2)+Math.pow((r=Math.random()*this.world.height)-a,2));while(n>i-50);this.enemies.push({x:o,y:r,mass:l,radius:3*Math.sqrt(l),color:e[s%e.length],name:"Player ".concat(s+2),speed:Math.max(.2,35/Math.sqrt(l)),targetX:Math.random()*this.world.width,targetY:Math.random()*this.world.height,lastTargetChange:Date.now(),spawnProtection:!0,spawnProtectionTime:4e3,spawnProtectionStart:Date.now()+200*s})}console.log("\uD83D\uDC65 Generated ".concat(this.enemies.length," enemies within radius ").concat(Math.floor(i),"px"))}generateViruses(){this.viruses=[];let e=this.world.width/2,t=this.world.height/2,a=this.currentPlayableRadius;for(let i=0;i<12;i++){let i,s,o;do o=Math.sqrt(Math.pow((i=Math.random()*this.world.width)-e,2)+Math.pow((s=Math.random()*this.world.height)-t,2));while(o>a-100);this.viruses.push({x:i,y:s,radius:40+20*Math.random(),color:"#00FF41",spikes:12,mass:100,rotationSpeed:.5+1.5*Math.random(),currentRotation:360*Math.random(),pulseSpeed:.02+.03*Math.random(),pulsePhase:Math.random()*Math.PI*2,spikeWaveSpeed:.05+.05*Math.random(),spikeWavePhase:Math.random()*Math.PI*2,glowIntensity:.5+.5*Math.random(),colorShift:30*Math.random()})}console.log("\uD83E\uDDA0 Generated ".concat(this.viruses.length," viruses within radius ").concat(Math.floor(a),"px"))}spawnEnemy(){let e,t,a;let i=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7"],s=this.world.width/2,o=this.world.height/2,r=this.currentPlayableRadius,n=15+40*Math.random();do a=Math.sqrt(Math.pow((e=Math.random()*this.world.width)-s,2)+Math.pow((t=Math.random()*this.world.height)-o,2));while(a>r-50);let l={x:e,y:t,mass:n,radius:3*Math.sqrt(n),color:i[Math.floor(Math.random()*i.length)],name:"Player ".concat(this.enemies.length+2),speed:Math.max(.2,35/Math.sqrt(n)),targetX:Math.random()*this.world.width,targetY:Math.random()*this.world.height,lastTargetChange:Date.now(),spawnProtection:!0,spawnProtectionTime:4e3,spawnProtectionStart:Date.now()};this.enemies.push(l),console.log("\uD83D\uDC65 Spawned new enemy within radius ".concat(Math.floor(r),"px"))}spawnVirus(){let e,t,a;let i=this.world.width/2,s=this.world.height/2,o=this.currentPlayableRadius;do a=Math.sqrt(Math.pow((e=Math.random()*this.world.width)-i,2)+Math.pow((t=Math.random()*this.world.height)-s,2));while(a>o-100);this.viruses.push({x:e,y:t,radius:40+20*Math.random(),color:"#00FF41",spikes:12,mass:100,rotationSpeed:.5+1.5*Math.random(),currentRotation:360*Math.random(),pulseSpeed:.02+.03*Math.random(),pulsePhase:Math.random()*Math.PI*2,spikeWaveSpeed:.05+.05*Math.random(),spikeWavePhase:Math.random()*Math.PI*2,glowIntensity:.5+.5*Math.random(),colorShift:30*Math.random()}),console.log("\uD83E\uDDA0 Spawned new virus within radius ".concat(Math.floor(o),"px"))}bindEvents(){this.canvas.addEventListener("mousemove",e=>{let t=this.canvas.getBoundingClientRect();if(this.mouse.x=e.clientX-t.left,this.mouse.y=e.clientY-t.top,this.mouse.worldX=this.mouse.x+this.camera.x,this.mouse.worldY=this.mouse.y+this.camera.y,!window.isMobileDevice){let e=this.mouse.worldX-this.player.x,t=this.mouse.worldY-this.player.y,a=Math.sqrt(e*e+t*t);a>1&&window.sendInputToServer&&window.sendInputToServer(e/a,t/a),this.player.targetX=this.mouse.worldX,this.player.targetY=this.mouse.worldY}}),console.log("\uD83D\uDD79️ Mobile controls: Analog stick only (touch-to-move disabled)")}update(){if(!this.running)return;let e=Date.now(),t=(e-this.lastUpdate)/1e3;if(this.lastUpdate=e,this.updatePlayer(t),this.updateCamera(),window.isMultiplayer&&this.serverState){console.log("\uD83C\uDF10 Multiplayer mode: Using server-authoritative state");return}for(console.log("\uD83C\uDFE0 Single-player mode: Running local game logic"),this.updateDynamicZone(t),this.updateSpawnProtection(),this.enemies.forEach(e=>this.updateEnemy(e,t)),this.checkCollisions();this.coins.length<1e3;){let e,t,a;let i=this.world.width/2,s=this.world.height/2;do a=Math.sqrt(Math.pow((e=Math.random()*this.world.width)-i,2)+Math.pow((t=Math.random()*this.world.height)-s,2));while(a>1780);this.coins.push({x:e,y:t,radius:8,color:"#FFD700",value:5})}}updatePlayer(e){this.splitCooldown>0&&this.splitCooldown--;let t=this.player.targetX-this.player.x,a=this.player.targetY-this.player.y,i=Math.sqrt(t*t+a*a);if(window.isUsingJoystick&&.01>Math.random()&&console.log("\uD83C\uDFAE Player Movement Update:",{playerPos:{x:this.player.x.toFixed(1),y:this.player.y.toFixed(1)},targetPos:{x:this.player.targetX.toFixed(1),y:this.player.targetY.toFixed(1)},distance:i.toFixed(1),usingJoystick:window.isUsingJoystick}),i>.1){let e=Math.min(Math.max(1.5,6/Math.sqrt(this.player.mass/20)),i);this.player.x+=t/i*e,this.player.y+=a/i*e}this.updatePlayerPieces(e);let s=this.world.width/2,o=this.world.height/2,r=this.currentPlayableRadius-this.player.radius;if(Math.sqrt(Math.pow(this.player.x-s,2)+Math.pow(this.player.y-o,2))>r){let e=Math.atan2(this.player.y-o,this.player.x-s);this.player.x=s+Math.cos(e)*r,this.player.y=o+Math.sin(e)*r}if(this.player.radius=3*Math.sqrt(this.player.mass),this.antiCheat.enabled){let e=3*Math.sqrt(this.player.mass);Math.abs(this.player.radius-e)>1&&(console.log("⚠️ RADIUS VIOLATION: Player mass: ".concat(this.player.mass,", Current radius: ").concat(this.player.radius,", Expected radius: ").concat(e)),this.recordViolation("RADIUS_MANIPULATION","Invalid radius: ".concat(this.player.radius," vs expected: ").concat(e)),this.player.radius=e)}this.player.mass>1e3&&console.log("\uD83D\uDD0D HIGH MASS DEBUG: Mass=".concat(this.player.mass.toFixed(1),", Radius=").concat(this.player.radius.toFixed(1),", Zone=").concat(this.currentPlayableRadius,", MaxRadius=").concat((this.currentPlayableRadius-this.player.radius).toFixed(1)))}updatePlayerPieces(e){let t=Date.now(),a=this.world.width/2,i=this.world.height/2,s=this.currentPlayableRadius;for(let o=this.playerPieces.length-1;o>=0;o--){let r=this.playerPieces[o],n=r.targetX-r.x,l=r.targetY-r.y,c=Math.sqrt(n*n+l*l);if(0!==r.vx||0!==r.vy){let t=60*e;r.x+=r.vx*t,r.y+=r.vy*t,r.vx*=.92,r.vy*=.92,.05>Math.abs(r.vx)&&(r.vx=0),.05>Math.abs(r.vy)&&(r.vy=0),(Math.abs(r.vx)>.05||Math.abs(r.vy)>.05)&&console.log("\uD83D\uDE80 Piece ejecting: vx=".concat(r.vx.toFixed(2),", vy=").concat(r.vy.toFixed(2),", pos=(").concat(r.x.toFixed(0),", ").concat(r.y.toFixed(0),")"))}if(c>.1&&.05>Math.abs(r.vx)&&.05>Math.abs(r.vy)){let e=Math.min(Math.max(1.5,6/Math.sqrt(r.mass/20)),c),t=n/c*e,a=l/c*e;r.x+=t,r.y+=a}if(r.radius=3*Math.sqrt(r.mass),r.targetX=this.player.targetX,r.targetY=this.player.targetY,Math.sqrt(Math.pow(r.x-a,2)+Math.pow(r.y-i,2))>s-r.radius){let e=Math.atan2(r.y-i,r.x-a);r.x=a+Math.cos(e)*(s-r.radius),r.y=i+Math.sin(e)*(s-r.radius)}if(t-r.splitTime>3e3&&(r.recombineReady=!0),t%2e3<50&&console.log("\uD83D\uDD0D Piece ".concat(o,": Ready=").concat(r.recombineReady,", Age=").concat(((t-r.splitTime)/1e3).toFixed(1),"s, Distance to main=").concat(Math.sqrt(Math.pow(r.x-this.player.x,2)+Math.pow(r.y-this.player.y,2)).toFixed(0))),r.recombineReady){let e=Math.sqrt(Math.pow(r.x-this.player.x,2)+Math.pow(r.y-this.player.y,2));if(e<(r.radius+this.player.radius)*1.5){this.player.mass+=r.mass,this.player.radius=3*Math.sqrt(this.player.mass),this.playerPieces.splice(o,1),console.log("\uD83D\uDD04 Player piece recombined with main! Distance: ".concat(e.toFixed(0),", Combined mass: ").concat(Math.floor(this.player.mass),", Remaining pieces: ").concat(this.playerPieces.length));continue}}for(let e=o+1;e<this.playerPieces.length;e++){let t=this.playerPieces[e];if(r.recombineReady&&t.recombineReady){let a=Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));if(a<(r.radius+t.radius)*1.5){if(r.mass>=t.mass)r.mass+=t.mass,r.radius=3*Math.sqrt(r.mass),this.playerPieces.splice(e,1),console.log("\uD83D\uDD04 Player pieces merged! Distance: ".concat(a.toFixed(0),", New mass: ").concat(Math.floor(r.mass),", Remaining pieces: ").concat(this.playerPieces.length));else{t.mass+=r.mass,t.radius=3*Math.sqrt(t.mass),this.playerPieces.splice(o,1),console.log("\uD83D\uDD04 Player pieces merged! Distance: ".concat(a.toFixed(0),", New mass: ").concat(Math.floor(t.mass),", Remaining pieces: ").concat(this.playerPieces.length));break}}}}}y(Math.floor(this.player.mass+this.playerPieces.reduce((e,t)=>e+t.mass,0)))}updateEnemy(e,t){let a=Date.now(),i=this.world.width/2,s=this.world.height/2,o=this.currentPlayableRadius;if(a-e.lastTargetChange>3e3+2e3*Math.random()){let t,r,n;do n=Math.sqrt(Math.pow((t=Math.random()*this.world.width)-i,2)+Math.pow((r=Math.random()*this.world.height)-s,2));while(n>o-e.radius-50);e.targetX=t,e.targetY=r,e.lastTargetChange=a}let r=e.targetX-e.x,n=e.targetY-e.y,l=Math.sqrt(r*r+n*n);if(l>5){let c=r/l*e.speed*60*t,d=n/l*e.speed*60*t;if(e.x+=.7*c,e.y+=.7*d,Math.sqrt(Math.pow(e.x-i,2)+Math.pow(e.y-s,2))+e.radius>o){let t=Math.atan2(e.y-s,e.x-i),r=o-e.radius;e.x=i+Math.cos(t)*r,e.y=s+Math.sin(t)*r;let n=Math.atan2(s-e.y,i-e.x),l=.8*o*Math.random();e.targetX=i+Math.cos(n+(Math.random()-.5)*Math.PI)*l,e.targetY=s+Math.sin(n+(Math.random()-.5)*Math.PI)*l,e.lastTargetChange=a}}}updateSpawnProtection(){let e=Date.now();this.player.spawnProtection&&e-this.player.spawnProtectionStart>=this.player.spawnProtectionTime&&(this.player.spawnProtection=!1,console.log("Player spawn protection ended")),this.enemies.forEach(t=>{t.spawnProtection&&e-t.spawnProtectionStart>=t.spawnProtectionTime&&(t.spawnProtection=!1,console.log("Enemy ".concat(t.name," spawn protection ended")))})}checkCollisions(){if(this.running){for(let e=this.coins.length-1;e>=0;e--){let t=this.coins[e],a=this.player.x-t.x,i=this.player.y-t.y;Math.sqrt(a*a+i*i)<this.player.radius+t.radius&&(this.player.mass+=t.value,g(e=>e+t.value),y(this.player.mass),this.coins.splice(e,1),"function"==typeof ec&&(ec("coin_collected",1),ec("mass_reached",this.player.mass)))}for(let e=this.viruses.length-1;e>=0;e--){let t=this.viruses[e],a=this.player.x-t.x,i=this.player.y-t.y;if(Math.sqrt(a*a+i*i)<this.player.radius+t.radius){if(!(this.player.mass>t.mass))continue;{let t,s,o;let r=Math.max(2,Math.min(4,Math.floor(this.player.mass/40))),n=this.player.mass/r;this.player.mass=n,y(Math.floor(n)),this.player.mass=Math.max(20,.4*this.player.mass);let l=Math.atan2(a,i);this.player.x+=80*Math.sin(l),this.player.y+=80*Math.cos(l),this.viruses.splice(e,1);let c=this.world.width/2,d=this.world.height/2;do o=Math.sqrt(Math.pow((t=Math.random()*this.world.width)-c,2)+Math.pow((s=Math.random()*this.world.height)-d,2));while(o>1750);this.viruses.push({x:t,y:s,radius:35,color:"#00FF41",spikes:12,mass:100})}}}for(let e=this.enemies.length-1;e>=0;e--){let t=this.enemies[e],a=this.player.x-t.x,i=this.player.y-t.y;if(Math.sqrt(a*a+i*i)<this.player.radius+t.radius-5){if(this.player.spawnProtection||t.spawnProtection)continue;if(this.player.mass>1.25*t.mass){let e,a,i;this.player.mass+=.8*t.mass,g(e=>e+Math.floor(t.mass)),b(e=>e+1),y(this.player.mass),"function"==typeof ec&&(ec("elimination",1),ec("mass_reached",this.player.mass)),t.mass=15+40*Math.random(),t.radius=3*Math.sqrt(t.mass);let s=this.world.width/2,o=this.world.height/2,r=this.currentPlayableRadius;do i=Math.sqrt(Math.pow((e=Math.random()*this.world.width)-s,2)+Math.pow((a=Math.random()*this.world.height)-o,2));while(i>r-50);t.x=e,t.y=a,t.spawnProtection=!0,t.spawnProtectionStart=Date.now(),console.log("Enemy ".concat(t.name," respawned with spawn protection within zone radius ").concat(Math.floor(r),"px"))}else if(t.mass>1.25*this.player.mass){if(console.log("\uD83D\uDC80 Player eliminated by ".concat(t.name,"! Player mass: ").concat(this.player.mass.toFixed(1),", Enemy mass: ").concat(t.mass.toFixed(1))),this.running=!1,this.gameStartTime&&this.setTimeSurvived){let e=Math.floor((Date.now()-this.gameStartTime)/1e3);this.setTimeSurvived(e),console.log("\uD83C\uDFC1 Game Over - Survived for ".concat(e," seconds"))}c(!0)}}}this.enemies.forEach(e=>{for(let t=this.coins.length-1;t>=0;t--){let a=this.coins[t],i=e.x-a.x,s=e.y-a.y;if(Math.sqrt(i*i+s*s)<e.radius+a.radius){e.mass+=.5*a.value,e.radius=3*Math.sqrt(e.mass),this.coins.splice(t,1);break}}}),this.checkPlayerPiecesCollisions()}}checkPlayerPiecesCollisions(){for(let e=this.playerPieces.length-1;e>=0;e--){let t=this.playerPieces[e];for(let e=this.coins.length-1;e>=0;e--){let a=this.coins[e],i=t.x-a.x,s=t.y-a.y;Math.sqrt(i*i+s*s)<t.radius+a.radius&&(t.mass+=a.value,t.radius=3*Math.sqrt(t.mass),g(e=>e+a.value),this.coins.splice(e,1),"function"==typeof ec&&(ec("coin_collected",1),ec("mass_reached",t.mass)))}for(let a=this.enemies.length-1;a>=0;a--){let i=this.enemies[a],s=t.x-i.x,o=t.y-i.y;if(Math.sqrt(s*s+o*o)<t.radius+i.radius-10){if(i.spawnProtection)continue;if(t.mass>1.25*i.mass)t.mass+=.8*i.mass,t.radius=3*Math.sqrt(t.mass),g(e=>e+Math.floor(i.mass)),b(e=>e+1),this.enemies.splice(a,1),this.spawnEnemy(),"function"==typeof ec&&(ec("elimination",1),ec("mass_reached",t.mass)),console.log("\uD83D\uDD25 Player piece eliminated enemy! Piece mass: ".concat(Math.floor(t.mass)));else if(i.mass>1.35*t.mass){if(i.mass+=.8*t.mass,i.radius=3*Math.sqrt(i.mass),this.playerPieces.splice(e,1),console.log("\uD83D\uDC80 Player piece was eliminated by enemy! Remaining pieces: ".concat(this.playerPieces.length)),0===this.playerPieces.length&&this.player.mass<=15){console.log("\uD83C\uDFC1 Game Over - All pieces eliminated and main player critically small (mass: ".concat(this.player.mass,")!")),this.running=!1;let e=Math.floor((Date.now()-this.gameStartTime)/1e3);v(e),this.setTimeSurvived(e),c(!0)}break}}}for(let e=this.viruses.length-1;e>=0;e--){let a=this.viruses[e],i=t.x-a.x,s=t.y-a.y;if(Math.sqrt(i*i+s*s)<t.radius+a.radius&&t.mass>a.mass){if(t.mass>40){let e=t.mass/2;t.mass=e,t.radius=3*Math.sqrt(t.mass);let a={x:t.x+60*Math.random()-30,y:t.y+60*Math.random()-30,mass:e,radius:3*Math.sqrt(e),color:t.color,name:"You",speed:t.speed,targetX:t.targetX,targetY:t.targetY,splitTime:Date.now(),recombineReady:!1,vx:(Math.random()-.5)*6,vy:(Math.random()-.5)*6};this.playerPieces.length<15&&this.playerPieces.push(a),console.log("\uD83E\uDDA0 Player piece hit virus and split! Now ".concat(this.playerPieces.length+1," total pieces"))}this.viruses.splice(e,1),this.spawnVirus()}}}y(Math.floor(this.player.mass+this.playerPieces.reduce((e,t)=>e+t.mass,0)))}updateCamera(){let e=this.player.x-this.canvas.width/2,t=this.player.y-this.canvas.height/2;this.camera.x+=(e-this.camera.x)*.2,this.camera.y+=(t-this.camera.y)*.2,this.camera.x=Math.max(-100,Math.min(this.world.width-this.canvas.width+100,this.camera.x)),this.camera.y=Math.max(-100,Math.min(this.world.height-this.canvas.height+100,this.camera.y))}render(){this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.translate(-this.camera.x,-this.camera.y),this.drawGrid(),this.drawWorldBoundary(),this.serverState&&window.isMultiplayer?(this.serverState.coins.forEach(e=>this.drawCoin(e)),this.serverState.viruses.forEach(e=>this.drawVirus(e)),this.serverState.players.forEach(e=>{e.alive&&this.drawPlayer(e)})):(this.coins.forEach(e=>this.drawCoin(e)),this.viruses.forEach(e=>this.drawVirus(e)),this.enemies.forEach(e=>this.drawPlayer(e)),!this.running||this.gameStates.cashOutComplete||this.gameStates.gameOver||(this.drawPlayer(this.player),this.playerPieces.forEach(e=>this.drawPlayer(e)))),this.ctx.restore()}drawGrid(){this.ctx.strokeStyle="#808080",this.ctx.lineWidth=1,this.ctx.globalAlpha=.3;let e=50*Math.floor(this.camera.x/50),t=50*Math.floor(this.camera.y/50),a=e+this.canvas.width+50,i=t+this.canvas.height+50;for(let s=e;s<=a;s+=50)this.ctx.beginPath(),this.ctx.moveTo(s,t),this.ctx.lineTo(s,i),this.ctx.stroke();for(let s=t;s<=i;s+=50)this.ctx.beginPath(),this.ctx.moveTo(e,s),this.ctx.lineTo(a,s),this.ctx.stroke();this.ctx.globalAlpha=1}drawWorldBoundary(){let e=this.world.width/2,t=this.world.height/2,a=this.currentPlayableRadius;this.ctx.fillStyle="#1a0000",this.ctx.fillRect(0,0,this.world.width,this.world.height),this.ctx.beginPath(),this.ctx.arc(e,t,a,0,2*Math.PI),this.ctx.fillStyle="#000000",this.ctx.fill();let i="#00ff00";if(Math.abs(this.currentPlayableRadius-this.targetPlayableRadius)>1&&(i="#ffff00"),this.isCashGame&&(i=this.targetPlayableRadius>this.currentPlayableRadius?"#00ffff":"#0080ff"),this.ctx.beginPath(),this.ctx.arc(e,t,a,0,2*Math.PI),this.ctx.strokeStyle=i,this.ctx.lineWidth=8,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(e,t,a,0,2*Math.PI),this.ctx.strokeStyle=i.replace(")",", 0.6)"),this.ctx.lineWidth=16,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(e,t,a,0,2*Math.PI),this.ctx.strokeStyle=i.replace(")",", 0.3)"),this.ctx.lineWidth=24,this.ctx.stroke(),this.isCashGame&&Math.abs(this.currentPlayableRadius-this.targetPlayableRadius)>1){this.ctx.fillStyle="#ffffff",this.ctx.font="bold 16px Arial",this.ctx.textAlign="center";let i=this.targetPlayableRadius>this.currentPlayableRadius?"EXPANDING":"SHRINKING";this.ctx.fillText("ZONE ".concat(i),e,t-a-40),this.ctx.font="bold 12px Arial",this.ctx.fillText("Players: ".concat(this.realPlayerCount," | Radius: ").concat(Math.floor(a)),e,t-a-20)}}drawCoin(e){this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius,0,2*Math.PI),this.ctx.fillStyle=e.color,this.ctx.fill(),this.ctx.strokeStyle="#FFB000",this.ctx.lineWidth=2,this.ctx.stroke(),this.ctx.fillStyle="#000000",this.ctx.font="bold 12px Arial",this.ctx.textAlign="center",this.ctx.fillText("$",e.x,e.y+4)}drawPlayer(e){if(this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius,0,2*Math.PI),this.ctx.fillStyle=e.color,this.ctx.fill(),this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=3,this.ctx.stroke(),e.spawnProtection){this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius+8,0,2*Math.PI),this.ctx.strokeStyle="#3B82F6",this.ctx.lineWidth=4,this.ctx.setLineDash([10,5]),this.ctx.stroke(),this.ctx.setLineDash([]);let t=Date.now()/1e3;this.ctx.globalAlpha=.3*Math.sin(4*t)+.7,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius+6,0,2*Math.PI),this.ctx.strokeStyle="#60A5FA",this.ctx.lineWidth=2,this.ctx.stroke(),this.ctx.globalAlpha=1}if(this.gameStates&&this.gameStates.isCashingOut&&this.gameStates.cashOutProgress>0&&(e===this.player||"You"===e.name&&e!==this.enemies.find(e=>"You"===e.name))){console.log("\uD83C\uDFAF Drawing compact cash out ring on main player:",e.name);let t=e.radius+8,a=this.gameStates.cashOutProgress/100*Math.PI*2;this.ctx.beginPath(),this.ctx.arc(e.x,e.y,t,0,2*Math.PI),this.ctx.strokeStyle="rgba(34, 197, 94, 0.3)",this.ctx.lineWidth=6,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(e.x,e.y,t,-Math.PI/2,-Math.PI/2+a),this.ctx.strokeStyle="#00ff00",this.ctx.lineWidth=6,this.ctx.lineCap="round",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(e.x,e.y,t+2,-Math.PI/2,-Math.PI/2+a),this.ctx.strokeStyle="rgba(0, 255, 0, 0.6)",this.ctx.lineWidth=3,this.ctx.lineCap="round",this.ctx.stroke();let i=Date.now()/1e3;this.ctx.globalAlpha=.3*Math.sin(6*i)+.8,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,t-2,-Math.PI/2,-Math.PI/2+a),this.ctx.strokeStyle="#66ff66",this.ctx.lineWidth=3,this.ctx.lineCap="round",this.ctx.stroke(),this.ctx.globalAlpha=1}this.ctx.fillStyle="#ffffff",this.ctx.font="bold 14px Arial",this.ctx.textAlign="center",this.ctx.fillText(e.name,e.x,e.y-e.radius-15);let t=Math.max(2,.12*e.radius),a=.35*e.radius;this.ctx.beginPath(),this.ctx.arc(e.x-a,e.y-.3*a,t,0,2*Math.PI),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(e.x+a,e.y-.3*a,t,0,2*Math.PI),this.ctx.fillStyle="#000000",this.ctx.fill()}drawVirus(e){e.currentRotation=isNaN(e.currentRotation)?0:e.currentRotation,e.rotationSpeed=isNaN(e.rotationSpeed)?.5:e.rotationSpeed,e.pulsePhase=isNaN(e.pulsePhase)?0:e.pulsePhase,e.pulseSpeed=isNaN(e.pulseSpeed)?.02:e.pulseSpeed,e.spikeWavePhase=isNaN(e.spikeWavePhase)?0:e.spikeWavePhase,e.spikeWaveSpeed=isNaN(e.spikeWaveSpeed)?.05:e.spikeWaveSpeed,e.colorShift=isNaN(e.colorShift)?0:e.colorShift,e.glowIntensity=isNaN(e.glowIntensity)?.5:e.glowIntensity,e.radius=isNaN(e.radius)?30:e.radius,e.spikes=isNaN(e.spikes)?12:e.spikes,e.currentRotation+=e.rotationSpeed,e.pulsePhase+=e.pulseSpeed,e.spikeWavePhase+=e.spikeWaveSpeed;let t=1+.1*Math.sin(e.pulsePhase),a=.5+.3*Math.sin(1.5*e.pulsePhase);this.ctx.save(),this.ctx.translate(e.x,e.y),this.ctx.rotate(e.currentRotation*Math.PI/180),this.ctx.scale(t,t);let i=this.ctx.createRadialGradient(0,0,0,0,0,e.radius+20),s=isNaN(e.colorShift)?0:e.colorShift;i.addColorStop(0,"hsl(120, 100%, ".concat(50+s,"%)")),i.addColorStop(.6,"#00FF41"),i.addColorStop(1,"#00AA00"),this.ctx.shadowColor="#00FF41";let o=isNaN(e.glowIntensity)?.5:e.glowIntensity;this.ctx.shadowBlur=15*o*a,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.beginPath();for(let t=0;t<e.spikes;t++){let a=t/e.spikes*Math.PI*2,i=3*Math.sin(e.spikeWavePhase+.5*t),s=e.radius+12+i,o=e.radius-3,r=Math.cos(a)*s,n=Math.sin(a)*s,l=(t+.5)/e.spikes*Math.PI*2,c=Math.cos(l)*o,d=Math.sin(l)*o;0===t?this.ctx.moveTo(r,n):this.ctx.lineTo(r,n),this.ctx.lineTo(c,d)}this.ctx.closePath(),this.ctx.fillStyle=i,this.ctx.fill(),this.ctx.strokeStyle="rgba(0, 170, 0, ".concat(.8+.2*a,")"),this.ctx.lineWidth=2+.5*Math.sin(2*e.pulsePhase),this.ctx.stroke(),this.ctx.shadowBlur=0;let r=e.radius-15,n=this.ctx.createRadialGradient(0,0,0,0,0,r);n.addColorStop(0,"rgba(0, 255, 65, ".concat(.8+.2*a,")")),n.addColorStop(.5,"rgba(0, 68, 0, 0.9)"),n.addColorStop(1,"rgba(0, 34, 0, 1)"),this.ctx.beginPath(),this.ctx.arc(0,0,r,0,2*Math.PI),this.ctx.fillStyle=n,this.ctx.fill(),this.ctx.strokeStyle="rgba(0, 255, 65, ".concat(.4+.3*a,")"),this.ctx.lineWidth=1;for(let t=0;t<6;t++){let a=t/6*Math.PI*2+.02*e.currentRotation,i=.6*r;this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(Math.cos(a)*i,Math.sin(a)*i),this.ctx.stroke()}let l=3+1.5*Math.sin(3*e.pulsePhase);this.ctx.beginPath(),this.ctx.arc(0,0,l,0,2*Math.PI),this.ctx.fillStyle="rgba(255, 255, 255, ".concat(.8+.2*a,")"),this.ctx.fill(),this.ctx.restore()}start(){this.running=!0,this.gameStartTime=Date.now(),this.timeSurvivedSeconds=0,n(!0)}stop(){this.running=!1}split(){if(this.player.mass<36||this.splitCooldown>0)return;let e=1+this.playerPieces.length;if(e>=16)return;let t=this.player.mass/2,a=6*Math.sqrt(t/Math.PI),i=this.mouse.worldX-this.player.x,s=this.mouse.worldY-this.player.y,o=Math.sqrt(i*i+s*s),r=0,n=0;o>0?(r=i/o,n=s/o):(r=1,n=0);let l={x:this.player.x+100*r,y:this.player.y+100*n,mass:t,radius:a,color:this.player.color,name:"You",speed:this.player.speed,targetX:this.mouse.worldX,targetY:this.mouse.worldY,splitTime:Date.now(),recombineReady:!1,vx:20*r,vy:20*n};this.player.mass=t,this.player.radius=a,this.player.x=this.player.x-20*r,this.player.y=this.player.y-20*n,this.player.targetX=this.mouse.worldX,this.player.targetY=this.mouse.worldY,this.playerPieces.push(l),y(Math.floor(this.player.mass+this.playerPieces.reduce((e,t)=>e+t.mass,0))),this.splitCooldown=60,console.log("\uD83D\uDE80 Player split toward mouse! Now ".concat(e+1," pieces. Total mass: ").concat(Math.floor(this.player.mass+this.playerPieces.reduce((e,t)=>e+t.mass,0)),". Direction: (").concat(r.toFixed(2),", ").concat(n.toFixed(2),")"))}constructor(e,t,a,i,s){this.canvas=e,this.ctx=e.getContext("2d"),this.world={width:4e3,height:4e3},this.camera={x:0,y:0},this.mouse={x:0,y:0,worldX:0,worldY:0},this.setCheatingBan=t,this.setTimeSurvived=a,this.selectedSkin=i||{id:"default",name:"Default Warrior",color:"#4A90E2"},this.gameStates=s||{},this.isCashGame=this.detectCashGame(),this.realPlayerCount=this.isCashGame?this.getRealPlayerCount():8,this.basePlayableRadius=800,this.maxPlayableRadius=1800,this.currentPlayableRadius=this.calculatePlayableRadius(),this.targetPlayableRadius=this.currentPlayableRadius,this.zoneTransitionSpeed=50,this.lastPlayerCountCheck=Date.now(),this.player={x:this.world.width/2,y:this.world.height/2,mass:20,radius:25,color:this.selectedSkin.color,name:"You",speed:2,targetX:this.world.width/2,targetY:this.world.height/2,spawnProtection:!0,spawnProtectionTime:6e3,spawnProtectionStart:Date.now()},this.playerPieces=[],this.splitCooldown=0,this.recombineTime=3,this.coins=[],this.enemies=[],this.viruses=[],this.running=!1,this.lastUpdate=Date.now(),this.gameStartTime=null,this.timeSurvivedSeconds=0,this.updateGameStates=e=>{this.gameStates&&Object.assign(this.gameStates,e)},this.antiCheat={enabled:!1,violations:0,maxViolations:20,banned:!1,lastPosition:{x:this.player.x,y:this.player.y,timestamp:Date.now()},maxSpeed:25,speedViolations:0,mouseMovements:[],clickPattern:[],keyPresses:[],lastInputTime:Date.now(),humanLikeThreshold:.2,massGainRate:[],eliminationPattern:[],survivalTime:Date.now(),suspiciousActions:0,actionQueue:[],lastActionTime:Date.now(),actionRateLimit:200,gameStateHash:"",integrityChecks:0,botLikeScore:0,humanScore:100},this.generateCoins(),this.generateEnemies(),this.generateViruses(),this.bindEvents(),this.initAntiCheat(),console.log("\uD83C\uDFAF Game initialized - Cash game: ".concat(this.isCashGame,", Player count: ").concat(this.realPlayerCount,", Zone radius: ").concat(this.currentPlayableRadius)),console.log("\uD83D\uDEE1️ Anti-cheat system: ".concat(this.antiCheat.enabled?"ENABLED":"\uD83D\uDEAB DISABLED FOR TESTING")),this.antiCheat.enabled||console.log("\uD83E\uDDEA ANTI-CHEAT TEMPORARILY DISABLED - All players can play without restrictions")}}(0,s.useEffect)(()=>{if(L&&document.body.classList.add("mobile-game-active"),document.body.style.margin="0",document.body.style.padding="0",document.body.style.overflow="hidden",document.body.style.background="#000000",document.documentElement.style.margin="0",document.documentElement.style.padding="0",document.documentElement.style.background="#000000",!e.current)return;let a=e.current,i=()=>{a.width=window.innerWidth,a.height=window.innerHeight};i(),window.addEventListener("resize",i);let s={id:"default",name:"Default Warrior",color:"#4A90E2"};try{let e=localStorage.getItem("selectedSkin");e&&(s=JSON.parse(e),console.log("\uD83C\uDFA8 Loaded selected skin for game:",s.name,s.color))}catch(e){console.log("⚠️ Error loading selected skin, using default:",e)}window.sendInputToServer=eo,window.isMultiplayer=D,window.wsRef=R;let o=new eR(a,h,v,s,{cashOutComplete:ex,gameOver:l,isCashingOut:ep,cashOutProgress:ed});t.current=o,console.log("\uD83C\uDFAE Game initialized and assigned to gameRef"),o.start(),V(!0),console.log("\uD83C\uDFAE Game started - Joystick should now be functional");let r=()=>{o.running&&(o.update(),o.render(),Date.now()%100<16&&(ey({playerX:o.player.x,playerY:o.player.y,enemies:o.enemies.map(e=>({x:e.x,y:e.y})),coins:o.coins.map(e=>({x:e.x,y:e.y})),viruses:o.viruses.map(e=>({x:e.x,y:e.y}))}),g(Math.floor(o.player.mass-20)),y(Math.floor(o.player.mass)))),requestAnimationFrame(r)};return r(),()=>{o.stop(),window.removeEventListener("resize",i),document.body.classList.remove("mobile-game-active"),document.body.style.margin="",document.body.style.padding="",document.body.style.overflow="",document.body.style.background="",document.documentElement.style.margin="",document.documentElement.style.padding="",document.documentElement.style.background=""}},[]);let ej=(0,s.useRef)(null),eE=()=>{ep||ex||!r?ep&&(console.log("Canceling cash out via button"),eu(!1),eh(0),ej.current&&(clearInterval(ej.current),ej.current=null)):(console.log("Starting cash out process via button"),eu(!0),eh(0))};(0,s.useEffect)(()=>{let e=e=>{"e"!==e.key.toLowerCase()||ep||ex||!r||(console.log("Starting cash out process"),eu(!0),eh(0))," "===e.key&&r&&t.current&&(e.preventDefault(),console.log("SPACE pressed - attempting split"),t.current.split())},a=e=>{"e"===e.key.toLowerCase()&&ep&&(console.log("Canceling cash out"),eu(!1),eh(0),ej.current&&(clearInterval(ej.current),ej.current=null))};return document.addEventListener("keydown",e),document.addEventListener("keyup",a),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",a)}},[ep,ex,r]),(0,s.useEffect)(()=>(ep&&!ex&&(console.log("Starting progress interval"),ej.current=setInterval(()=>{eh(e=>{if(console.log("Progress update:",e),e>=100){if(clearInterval(ej.current),ej.current=null,eu(!1),t.current&&t.current.gameStartTime){let e=Math.floor((Date.now()-t.current.gameStartTime)/1e3);v(e),console.log("\uD83D\uDCB0 Cash Out - Survived for ".concat(e," seconds"))}return t.current&&(t.current.running=!1,console.log("\uD83D\uDED1 Game stopped after successful cash out")),eg(!0),100}return e+2})},100)),()=>{ej.current&&(clearInterval(ej.current),ej.current=null)}),[ep,ex]),(0,s.useEffect)(()=>{if(!r||l||ex)return;let e=setInterval(()=>{t.current&&t.current.gameStartTime&&v(Math.floor((Date.now()-t.current.gameStartTime)/1e3))},1e3);return()=>clearInterval(e)},[r,l,ex]),(0,s.useEffect)(()=>{if(!r||l||ex)return;let e=setInterval(()=>{u(e=>{let t=e-1;return(ec("survival_time",60-t),t<=0)?(console.log("⏰ Mission timer completed! Player survived 60+ seconds and can continue playing"),60):t})},1e3);return()=>clearInterval(e)},[r,l,ex]);let eI=a=>{if(t.current){if(L){if(0!==_.x||0!==_.y){let e=Math.atan2(_.y,_.x),a=t.current.player.x+300*Math.cos(e),i=t.current.player.y+300*Math.sin(e);t.current.player.targetX=a,t.current.player.targetY=i,t.current.mouse.worldX=a,t.current.mouse.worldY=i;let s=a-t.current.camera.x,o=i-t.current.camera.y;t.current.mouse.x=s,t.current.mouse.y=o,console.log("\uD83D\uDD79️ Mobile split: joystick=(".concat(_.x.toFixed(1),", ").concat(_.y.toFixed(1),"), angle=").concat((180*e/Math.PI).toFixed(1),"\xb0, world=(").concat(a.toFixed(0),", ").concat(i.toFixed(0),")"))}else{let e=t.current.player.targetX||t.current.player.x+100,a=t.current.player.targetY||t.current.player.y;t.current.mouse.worldX=e,t.current.mouse.worldY=a,t.current.player.targetX=e,t.current.player.targetY=a,console.log("\uD83D\uDD79️ Mobile split with centered joystick - using current movement direction")}}else if(a&&void 0!==a.clientX&&void 0!==a.clientY){let i=e.current;if(i){let e=i.getBoundingClientRect();t.current.mouse.x=a.clientX-e.left,t.current.mouse.y=a.clientY-e.top,t.current.mouse.worldX=t.current.mouse.x+t.current.camera.x,t.current.mouse.worldY=t.current.mouse.y+t.current.camera.y,t.current.player.targetX=t.current.mouse.worldX,t.current.player.targetY=t.current.mouse.worldY,console.log("\uD83C\uDFAF Desktop split toward mouse: (".concat(t.current.mouse.worldX.toFixed(0),", ").concat(t.current.mouse.worldY.toFixed(0),")"))}}t.current.split()}},eA=()=>{c(!1),u(60),g(0),y(20),b(0),t.current&&(t.current.player={x:t.current.world.width/2,y:t.current.world.height/2,mass:20,radius:25,color:"#4A90E2",name:"You",speed:2,targetX:t.current.world.width/2,targetY:t.current.world.height/2},t.current.generateCoins(),t.current.generateEnemies(),t.current.start())};return(0,i.jsxs)("div",{className:"w-screen h-screen bg-black overflow-hidden m-0 p-0",style:{position:"relative",margin:0,padding:0},children:[(0,i.jsx)("canvas",{ref:e,className:"w-full h-full cursor-crosshair bg-black m-0 p-0",style:{position:"absolute",top:0,left:0,zIndex:1,margin:0,padding:0,border:"none",outline:"none",display:"block"}}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{position:"fixed",top:L?"calc(env(safe-area-inset-top, 0px) + 5px)":"10px",left:L?"calc(env(safe-area-inset-left, 0px) + 5px)":"10px",zIndex:1e3,backgroundColor:"rgba(0, 0, 0, 0.85)",border:L?"1px solid rgba(0, 255, 255, 0.3)":"2px solid rgba(0, 255, 255, 0.3)",borderRadius:L?"8px":"6px",padding:L?H?"6px":"4px":"10px",minWidth:L?H?"110px":"90px":"160px",maxWidth:L?H?"120px":"100px":"180px",fontFamily:'"Rajdhani", sans-serif',transition:"all 0.3s ease"},children:[(0,i.jsx)("div",{onClick:()=>{L&&(J(!H),K.current&&clearTimeout(K.current))},style:{color:"#00ffff",fontSize:L?H?"11px":"10px":"14px",fontWeight:"700",marginBottom:L?H?"6px":"3px":"10px",textAlign:"center",letterSpacing:"0.2px",cursor:L?"pointer":"default",userSelect:"none",transition:"all 0.2s ease",padding:L?"2px":"0"},onMouseDown:L?e=>{e.target.style.color="#00ffff"}:void 0,onMouseUp:L?e=>{e.target.style.color="#00ffff"}:void 0,onTouchStart:L?e=>{e.target.style.color="#00ffff"}:void 0,onTouchEnd:L?e=>{e.target.style.color="#00ffff"}:void 0,children:L?H?"Top 5":"Top 3":"\uD83D\uDCB0 Live Leaderboard"}),D&&(0,i.jsxs)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.7)",color:"connected"===P?"#00ff00":"connecting"===P?"#ffff00":"#ff0000",padding:L?"4px 8px":"6px 12px",borderRadius:"8px",fontSize:L?"10px":"12px",fontWeight:"bold",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px",border:"1px solid ".concat("connected"===P?"#00ff00":"connecting"===P?"#ffff00":"#ff0000")},children:[(0,i.jsx)("span",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"connected"===P?"#00ff00":"connecting"===P?"#ffff00":"#ff0000",animation:"connecting"===P?"pulse 1s infinite alternate":"none"}}),(0,i.jsxs)("span",{children:["connected"===P&&"\uD83C\uDF10 MULTIPLAYER (".concat(S," players)"),"connecting"===P&&"\uD83D\uDD04 CONNECTING...","error"===P&&"❌ CONNECTION ERROR","disconnected"===P&&"\uD83D\uDD0C DISCONNECTED"]})]}),(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:L?H?"2px":"0px":"4px",marginBottom:L?"8px":"10px",transition:"all 0.3s ease"},children:(()=>{if(!t.current)return null;let e=[{name:"You",score:x,isPlayer:!0},...t.current.enemies.map((e,t)=>({name:e.name,score:Math.floor(e.mass-20),isPlayer:!1}))];return e.sort((e,t)=>t.score-e.score),e.slice(0,L?H?5:3:5).map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:L?H?"2px 4px":"1px 2px":"4px 8px",backgroundColor:e.isPlayer?"rgba(0, 255, 255, 0.1)":"transparent",borderRadius:L?"6px":"4px",border:e.isPlayer?"1px solid rgba(0, 255, 255, 0.3)":"none",minHeight:L?H?"14px":"12px":"auto",transition:"all 0.2s ease",opacity:L&&!H&&t>=3?0:1,transform:L&&!H&&t>=3?"translateY(-10px)":"translateY(0)"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:L?H?"3px":"2px":"6px"},children:[L?(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsxs)("span",{style:{color:0===t?"#FFD700":1===t?"#C0C0C0":2===t?"#CD7F32":"#ffffff",fontSize:H?"9px":"8px",fontWeight:"700",minWidth:H?"10px":"8px"},children:["#",t+1]}),(0,i.jsx)("span",{style:{fontSize:"5px",color:"#9ca3af",opacity:"0.7",fontWeight:"500"},children:"Rank"})]}):(0,i.jsxs)("span",{style:{color:0===t?"#FFD700":1===t?"#C0C0C0":2===t?"#CD7F32":"#ffffff",fontSize:"12px",fontWeight:"700",minWidth:"14px"},children:["#",t+1]}),(0,i.jsx)("span",{style:{color:e.isPlayer?"#00ffff":"#ffffff",fontSize:L?H?"8px":"7px":"12px",fontWeight:"600",maxWidth:L?H?"50px":"40px":"60px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name})]}),L?(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsxs)("span",{style:{color:"#00ff88",fontSize:H?"9px":"8px",fontWeight:"700"},children:["$",e.score]}),(0,i.jsx)("span",{style:{fontSize:"5px",color:"#9ca3af",opacity:"0.7",fontWeight:"500"},children:"Score"})]}):(0,i.jsxs)("span",{style:{color:"#00ff88",fontSize:"12px",fontWeight:"700"},children:["$",e.score]})]},e.name))})()}),(0,i.jsx)("div",{style:{color:"#00ffff",fontSize:L?"8px":"10px",fontWeight:"600",textAlign:"center",paddingTop:"6px",borderTop:"1px solid rgba(0, 255, 255, 0.3)"},children:"11 players in game"})]}),(()=>{let e=new URLSearchParams(window.location.search).get("fee");return e&&parseFloat(e)>0?(0,i.jsxs)("div",{style:{position:"fixed",top:"180px",left:"10px",zIndex:1e3,backgroundColor:"rgba(0, 0, 0, 0.85)",border:"2px solid rgba(255, 69, 58, 0.6)",borderRadius:"6px",padding:"8px 12px",fontFamily:'"Rajdhani", sans-serif',minWidth:"160px"},children:[(0,i.jsx)("div",{style:{color:"#ff453a",fontSize:"12px",fontWeight:"700",marginBottom:"4px",textAlign:"center",letterSpacing:"0.5px"},children:"\uD83D\uDEE1️ ANTI-CHEAT ACTIVE"}),(0,i.jsx)("div",{style:{color:"#ffffff",fontSize:"10px",fontWeight:"500",textAlign:"center",lineHeight:"1.3"},children:"Fair play monitoring enabled"}),(0,i.jsx)("div",{style:{color:"#00ff88",fontSize:"10px",fontWeight:"600",textAlign:"center",marginTop:"2px"},children:"Status: PROTECTED"})]}):null})(),W.length>0&&t.current&&t.current.detectCashGame()&&(0,i.jsx)("div",{style:{position:"fixed",top:L?"50%":"20px",left:"50%",transform:L?"translate(-50%, -50%)":"translateX(-50%)",zIndex:L?2e3:1e3,backgroundColor:L?"rgba(0, 0, 0, 0.95)":"rgba(0, 0, 0, 0.85)",border:L?"3px solid rgba(59, 130, 246, 0.8)":"2px solid rgba(59, 130, 246, 0.6)",borderRadius:L?"16px":"8px",padding:L?"20px 24px":"12px 20px",fontFamily:'"Rajdhani", sans-serif',maxWidth:L?"300px":"400px",minWidth:L?"280px":"320px",transition:"all 0.3s ease",boxShadow:L?"0 10px 40px rgba(59, 130, 246, 0.4)":"none"},children:(()=>{let e=W[O];return e?(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:L?"20px":"16px"},children:[(0,i.jsx)("div",{style:{width:L?"50px":"40px",height:L?"50px":"40px",background:e.completed?"linear-gradient(45deg, #22c55e 0%, #16a34a 100%)":"linear-gradient(45deg, #3b82f6 0%, #1d4ed8 100%)",borderRadius:L?"12px":"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:L?"22px":"18px",border:"2px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:e.icon}),(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:L?"6px":"4px"},children:[(0,i.jsx)("span",{style:{color:e.completed?"#22c55e":"#ffffff",fontSize:L?"16px":"14px",fontWeight:"700",textTransform:"uppercase"},children:e.name}),(0,i.jsxs)("span",{style:{color:"#FFD700",fontSize:L?"14px":"12px",fontWeight:"700"},children:["+",e.reward,"\uD83D\uDCB0"]})]}),(0,i.jsx)("div",{style:{color:"#a0aec0",fontSize:L?"13px":"11px",marginBottom:L?"8px":"6px"},children:e.description}),(0,i.jsx)("div",{style:{width:"100%",height:L?"8px":"6px",backgroundColor:"rgba(0, 0, 0, 0.4)",borderRadius:L?"4px":"3px",overflow:"hidden",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,i.jsx)("div",{style:{width:"".concat(Math.min(100,e.progress/e.target*100),"%"),height:"100%",background:e.completed?"linear-gradient(90deg, #22c55e 0%, #16a34a 100%)":"linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%)",transition:"width 0.3s ease"}})}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:L?"4px":"2px"},children:[(0,i.jsxs)("span",{style:{color:"#9ca3af",fontSize:L?"12px":"10px"},children:[e.progress,"/",e.target]}),e.completed&&(0,i.jsx)("span",{style:{color:"#22c55e",fontSize:L?"12px":"10px",fontWeight:"700"},children:"✓ COMPLETE"})]})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:L?"6px":"4px"},children:[(0,i.jsx)("div",{style:{color:"#a0aec0",fontSize:L?"12px":"10px",textTransform:"uppercase"},children:"Mission"}),(0,i.jsxs)("div",{style:{color:"#ffffff",fontSize:L?"16px":"14px",fontWeight:"700"},children:[O+1,"/",W.length]}),(0,i.jsxs)("div",{style:{color:"#FFD700",fontSize:L?"12px":"10px",fontWeight:"700"},children:["\uD83D\uDCB0 ",I]})]})]}):null})()}),d&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999999,pointerEvents:"auto"},children:(0,i.jsxs)("div",{style:{backgroundColor:"#1a202c",border:"3px solid #ff3333",borderRadius:"12px",maxWidth:"500px",width:"90%",padding:"0",color:"white",boxShadow:"0 0 60px rgba(255, 51, 51, 0.8)",fontFamily:'"Rajdhani", sans-serif',animation:"pulse 2s infinite"},children:[(0,i.jsxs)("div",{style:{padding:"24px",borderBottom:"2px solid #ff3333",background:"linear-gradient(45deg, rgba(255, 51, 51, 0.2) 0%, rgba(255, 51, 51, 0.1) 100%)",textAlign:"center"},children:[(0,i.jsx)("div",{style:{width:"70px",height:"70px",background:"linear-gradient(45deg, #ff3333 0%, #cc0000 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"36px",margin:"0 auto 16px",boxShadow:"0 0 20px rgba(255, 51, 51, 0.6)"},children:"\uD83D\uDEAB"}),(0,i.jsx)("h2",{style:{color:"#ff3333",fontSize:"28px",fontWeight:"700",margin:"0 0 8px",textTransform:"uppercase",textShadow:"0 0 15px rgba(255, 51, 51, 0.8)",letterSpacing:"2px"},children:"ACCOUNT SUSPENDED"}),(0,i.jsx)("p",{style:{color:"#ff6b6b",fontSize:"16px",margin:"0",fontWeight:"600"},children:"Kicked for suspected cheating"})]}),(0,i.jsxs)("div",{style:{padding:"24px"},children:[(0,i.jsxs)("div",{style:{backgroundColor:"rgba(255, 51, 51, 0.1)",border:"1px solid rgba(255, 51, 51, 0.3)",borderRadius:"8px",padding:"16px",marginBottom:"24px",textAlign:"center"},children:[(0,i.jsx)("div",{style:{color:"#ffffff",fontSize:"18px",fontWeight:"700",marginBottom:"8px"},children:"\uD83D\uDEE1️ FAIR PLAY VIOLATION"}),(0,i.jsx)("div",{style:{color:"#e2e8f0",fontSize:"14px",lineHeight:"1.4"},children:"Our anti-cheat system detected suspicious activity including speed hacks, automation scripts, or memory manipulation attempts."})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"24px"},children:[(0,i.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"16px",borderRadius:"8px",textAlign:"center"},children:[(0,i.jsx)("div",{style:{color:"#ff6b6b",fontSize:"24px",fontWeight:"700"},children:"3/3"}),(0,i.jsx)("div",{style:{color:"#a0aec0",fontSize:"14px"},children:"Violations"})]}),(0,i.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"16px",borderRadius:"8px",textAlign:"center"},children:[(0,i.jsx)("div",{style:{color:"#ff6b6b",fontSize:"24px",fontWeight:"700"},children:"PERMANENT"}),(0,i.jsx)("div",{style:{color:"#a0aec0",fontSize:"14px"},children:"Ban Status"})]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"12px",flexDirection:"column"},children:[(0,i.jsx)("button",{onClick:()=>window.location.href="/",style:{backgroundColor:"#4a5568",border:"2px solid #718096",borderRadius:"8px",color:"#ffffff",fontSize:"16px",fontWeight:"600",padding:"12px 24px",cursor:"pointer",transition:"all 150ms",fontFamily:'"Rajdhani", sans-serif',textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseOver:e=>{e.target.style.backgroundColor="#718096",e.target.style.transform="translateY(-2px)"},onMouseOut:e=>{e.target.style.backgroundColor="#4a5568",e.target.style.transform="translateY(0)"},children:"\uD83C\uDFE0 Return to Lobby"}),(0,i.jsxs)("div",{style:{textAlign:"center",fontSize:"12px",color:"#a0aec0",marginTop:"8px",lineHeight:"1.4"},children:["Contact support if you believe this is an error.",(0,i.jsx)("br",{}),"Email: support@turfloot.com"]})]})]})]})}),r&&!l&&(0,i.jsxs)("div",{style:{position:"fixed",bottom:L?"calc(env(safe-area-inset-bottom, 0px) + 30px)":"20px",right:L?"calc(env(safe-area-inset-right, 0px) + 15px)":"auto",left:L?"auto":"50%",transform:L?"none":"translateX(-50%)",zIndex:1e3,display:"flex",flexDirection:"row",gap:"12px",alignItems:"center"},children:[(0,i.jsxs)("div",{style:{backgroundColor:"rgba(255, 165, 0, 0.95)",border:"3px solid #ff8c00",borderRadius:L?"50%":"8px",color:"#000000",fontSize:L?"12px":"16px",fontWeight:"700",cursor:"pointer",padding:L?"0":"12px 24px",width:L?"80px":"auto",height:L?"80px":"auto",display:"flex",alignItems:"center",justifyContent:"center",gap:L?"0":"8px",transition:"all 150ms",pointerEvents:"auto",textAlign:"center",fontFamily:'"Rajdhani", sans-serif',boxShadow:L?"0 4px 25px rgba(255, 165, 0, 0.7)":"0 4px 12px rgba(255, 165, 0, 0.4)",minWidth:L?"75px":"200px",position:"relative",overflow:"hidden",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",touchAction:"manipulation",flexDirection:L?"column":"row",touchAction:"manipulation"},onMouseOver:e=>{ep||(e.target.style.backgroundColor="rgba(255, 200, 50, 0.98)",e.target.style.transform=L?"scale(1.08)":"translateY(-2px)",e.target.style.boxShadow=L?"0 6px 30px rgba(255, 165, 0, 0.9)":"0 6px 20px rgba(255, 165, 0, 0.5)")},onMouseOut:e=>{ep||(e.target.style.backgroundColor="rgba(255, 165, 0, 0.95)",e.target.style.transform="scale(1)",e.target.style.boxShadow=L?"0 4px 25px rgba(255, 165, 0, 0.7)":"0 4px 12px rgba(255, 165, 0, 0.4)")},onTouchStart:e=>{L&&(eE(),e.target.style.transform="scale(0.95)",e.target.style.backgroundColor="rgba(255, 140, 0, 1)")},onTouchEnd:e=>{L&&(e.target.style.transform="scale(1)",e.target.style.backgroundColor="rgba(255, 165, 0, 0.95)")},onMouseDown:L?void 0:eE,children:[ep&&(0,i.jsx)("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:"".concat(ed,"%"),backgroundColor:"rgba(34, 197, 94, 0.8)",transition:"width 100ms linear",zIndex:1,borderRadius:L?"50%":"0"}}),(0,i.jsx)("span",{style:{position:"relative",zIndex:2,lineHeight:L?"1.2":"normal"},children:L?ep?(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsx)("div",{style:{fontSize:"20px"},children:"\uD83D\uDD25"}),(0,i.jsxs)("div",{style:{fontSize:"11px",fontWeight:"600"},children:[Math.floor(ed),"%"]})]}):(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsx)("div",{style:{fontSize:"20px"},children:"\uD83D\uDCB0"}),(0,i.jsx)("div",{style:{fontSize:"10px",fontWeight:"600"},children:"CASH"}),(0,i.jsxs)("div",{style:{fontSize:"9px",fontWeight:"500"},children:["$",x]})]}):ep?"\uD83D\uDD25 Cashing Out... ".concat(Math.floor(ed),"%"):"\uD83D\uDD25 Hold E to Cash Out ($".concat(x,")")})]}),(0,i.jsx)("div",{onClick:e=>eI(e),style:{backgroundColor:"rgba(0, 100, 255, 0.9)",border:"3px solid #0064ff",borderRadius:L?"50%":"8px",color:"#ffffff",fontSize:L?"12px":"16px",fontWeight:"700",cursor:"pointer",padding:L?"0":"12px 24px",width:L?"80px":"auto",height:L?"80px":"auto",display:"flex",alignItems:"center",justifyContent:"center",gap:L?"0":"8px",transition:"all 150ms",pointerEvents:"auto",fontFamily:'"Rajdhani", sans-serif',boxShadow:L?"0 4px 25px rgba(0, 100, 255, 0.7)":"0 4px 12px rgba(0, 100, 255, 0.3)",flexDirection:L?"column":"row",touchAction:"manipulation",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent"},onMouseOver:e=>{e.target.style.backgroundColor="rgba(50, 120, 255, 0.95)",e.target.style.transform=L?"scale(1.08)":"translateY(-2px)",e.target.style.boxShadow=L?"0 6px 30px rgba(0, 100, 255, 0.9)":"0 6px 20px rgba(0, 100, 255, 0.4)"},onMouseOut:e=>{e.target.style.backgroundColor="rgba(0, 100, 255, 0.9)",e.target.style.transform="scale(1)",e.target.style.boxShadow=L?"0 4px 25px rgba(0, 100, 255, 0.7)":"0 4px 12px rgba(0, 100, 255, 0.3)"},onTouchStart:e=>{L&&(e.target.style.transform="scale(0.95)",e.target.style.backgroundColor="rgba(0, 80, 200, 1)")},onTouchEnd:e=>{L&&(e.target.style.transform="scale(1)",e.target.style.backgroundColor="rgba(0, 100, 255, 0.9)")},children:L?(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsx)("div",{style:{fontSize:"20px"},children:"⚡"}),(0,i.jsx)("div",{style:{fontSize:"10px",fontWeight:"600"},children:"SPLIT"})]}):(0,i.jsx)("span",{children:"⚡ Split (Space)"})})]}),L&&(0,i.jsxs)("div",{ref:et,style:{position:"fixed",bottom:"calc(env(safe-area-inset-bottom, 0px) + 30px)",left:"calc(env(safe-area-inset-left, 0px) + 30px)",width:"80px",height:"80px",borderRadius:"50%",backgroundColor:t.current&&t.current.player?"rgba(255, 255, 255, 0.15)":"rgba(255, 255, 255, 0.05)",border:t.current&&t.current.player?"3px solid rgba(255, 255, 255, 0.4)":"3px solid rgba(255, 255, 255, 0.15)",animation:!G&&t.current&&t.current.player?"joystickPulse 3s ease-in-out infinite":"none",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,touchAction:"none",userSelect:"none",opacity:t.current&&t.current.player?1:.3,boxShadow:t.current&&t.current.player?"0 0 20px rgba(255, 255, 255, 0.2), inset 0 0 20px rgba(255, 255, 255, 0.1)":"0 0 10px rgba(255, 255, 255, 0.1), inset 0 0 10px rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},onTouchStart:er,onTouchMove:en,onTouchEnd:el,onMouseDown:er,onMouseMove:en,onMouseUp:el,children:[(0,i.jsx)("div",{ref:ea,style:{width:"35px",height:"35px",borderRadius:"50%",backgroundColor:G?"rgba(0, 150, 255, 0.9)":"rgba(255, 255, 255, 0.8)",border:"2px solid ".concat(G?"#0096ff":"rgba(255, 255, 255, 0.9)"),transform:"translate(".concat(_.x,"px, ").concat(_.y,"px)"),transition:G?"none":"all 0.2s ease-out",boxShadow:G?"0 0 15px rgba(0, 150, 255, 0.6), 0 2px 8px rgba(0, 0, 0, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.2)",cursor:"grab",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:(0,i.jsx)("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:G?"#ffffff":"rgba(0, 0, 0, 0.3)",transition:"background-color 0.2s ease"}})}),(0,i.jsx)("div",{style:{position:"absolute",bottom:"-25px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",color:"rgba(255, 255, 255, 0.7)",fontWeight:"600",fontFamily:'"Rajdhani", sans-serif',textAlign:"center",whiteSpace:"nowrap",textShadow:"0 1px 2px rgba(0, 0, 0, 0.8)"},children:"MOVE"})]}),(0,i.jsx)("div",{style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:L?"121px":"220px",height:L?"121px":"220px"},children:(0,i.jsxs)("div",{style:{width:L?"121px":"220px",height:L?"121px":"220px",borderRadius:"50%",backgroundColor:"#000000",border:L?"2px solid #00ff00":"4px solid #00ff00",position:"relative",overflow:"hidden",boxShadow:L?"0 0 15px rgba(0, 255, 0, 0.6)":"0 0 30px rgba(0, 255, 0, 0.6)"},children:[(0,i.jsx)("div",{style:{position:"absolute",top:"-3px",left:"-3px",right:"-3px",bottom:"-3px",borderRadius:"50%",background:"conic-gradient(\n                #00ff00 0deg, #00dd00 10deg, #00ff00 20deg, #00ee00 30deg,\n                #00ff00 40deg, #00cc00 50deg, #00ff00 60deg, #00dd00 70deg,\n                #00ff00 80deg, #00ee00 90deg, #00ff00 100deg, #00dd00 110deg,\n                #00ff00 120deg, #00cc00 130deg, #00ff00 140deg, #00ee00 150deg,\n                #00ff00 160deg, #00dd00 170deg, #00ff00 180deg, #00cc00 190deg,\n                #00ff00 200deg, #00ee00 210deg, #00ff00 220deg, #00dd00 230deg,\n                #00ff00 240deg, #00cc00 250deg, #00ff00 260deg, #00ee00 270deg,\n                #00ff00 280deg, #00dd00 290deg, #00ff00 300deg, #00cc00 310deg,\n                #00ff00 320deg, #00ee00 330deg, #00ff00 340deg, #00dd00 350deg\n              )",zIndex:-1}}),(0,i.jsx)("div",{style:{position:"absolute",top:"5px",left:"5px",right:"5px",bottom:"5px",borderRadius:"50%",background:"radial-gradient(circle, transparent 75%, rgba(255, 68, 68, 0.4) 85%, rgba(255, 68, 68, 0.6) 100%)",zIndex:1}}),(0,i.jsx)("div",{style:{position:"absolute",width:L?"6px":"12px",height:L?"6px":"12px",backgroundColor:"#60a5fa",borderRadius:"50%",left:"".concat(ef.playerX/4e3*(L?115:210)+(L?3:5),"px"),top:"".concat(ef.playerY/4e3*(L?115:210)+(L?3:5),"px"),transform:"translate(-50%, -50%)",border:L?"1px solid #ffffff":"3px solid #ffffff",boxShadow:L?"0 0 6px rgba(96, 165, 250, 1)":"0 0 12px rgba(96, 165, 250, 1)",zIndex:10}}),ef.enemies.map((e,t)=>(0,i.jsx)("div",{style:{position:"absolute",width:L?"3px":"6px",height:L?"3px":"6px",backgroundColor:"#ff6b6b",borderRadius:"50%",left:"".concat(e.x/4e3*(L?115:210)+(L?3:5),"px"),top:"".concat(e.y/4e3*(L?115:210)+(L?3:5),"px"),transform:"translate(-50%, -50%)",opacity:"0.9",border:L?"0.5px solid #ffffff":"1px solid #ffffff",zIndex:8}},t)),(0,i.jsx)("div",{style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",borderRadius:"50%",border:"3px solid rgba(0, 255, 0, 0.8)",boxShadow:"inset 0 0 20px rgba(0, 255, 0, 0.4)",zIndex:3}})]})}),(0,i.jsx)("div",{style:{position:"fixed",bottom:"10px",left:"10px",zIndex:1e3,backgroundColor:"rgba(0, 0, 0, 0.8)",border:"2px solid #333",borderRadius:"4px",padding:"6px 10px",fontSize:"11px",color:"#ccc",fontFamily:'"Rajdhani", sans-serif',fontWeight:"600"},children:(0,i.jsxs)("div",{style:{color:"#00ff88",fontWeight:"bold",display:"flex",alignItems:"center",gap:"4px"},children:[(0,i.jsx)("div",{style:{width:"8px",height:"8px",backgroundColor:"#00ff88",borderRadius:"50%"}}),(0,i.jsx)("span",{children:"24ms"})]})}),(0,i.jsxs)("div",{style:{position:"fixed",bottom:L?"calc(env(safe-area-inset-bottom, 0px) + 8px)":"10px",left:L?"50%":"auto",right:L?"auto":"10px",transform:L?"translateX(-50%)":"none",zIndex:1e3,background:L?"rgba(0, 0, 0, 0.6)":"rgba(0, 0, 0, 0.85)",border:L?"none":"2px solid #333",borderRadius:L?"6px":"4px",padding:L?$?"4px 6px":"2px 4px":"12px 14px",fontSize:L?$?"9px":"8px":"11px",color:"#ccc",fontFamily:'"Rajdhani", sans-serif',fontWeight:"600",minWidth:L?$?"100px":"75px":"160px",maxWidth:L?"none":"180px",transition:"all 0.2s ease"},children:[(0,i.jsx)("div",{onClick:()=>{L&&(Z(!$),Q.current&&clearTimeout(Q.current))},style:{color:L?"#9ca3af":"#22d3ee",fontSize:L?$?"9px":"8px":"14px",fontWeight:"600",marginBottom:L?$?"3px":"1px":"8px",borderBottom:L?"none":"1px solid #333",paddingBottom:L?"0":"6px",cursor:L?"pointer":"default",userSelect:"none",transition:"all 0.2s ease",textAlign:"center",opacity:L?"0.8":"1"},onTouchStart:L?e=>{e.target.style.color="#00ffff"}:void 0,onTouchEnd:L?e=>{e.target.style.color="#22d3ee"}:void 0,children:L?$?"You":"Stats":"You"}),!L||$?(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:L?"3px":"4px"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("span",{style:{color:"#9ca3af"},children:"Worth:"}),(0,i.jsxs)("span",{style:{color:"#22c55e",fontWeight:"700"},children:["$",x]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("span",{style:{color:"#9ca3af"},children:"Mass:"}),(0,i.jsx)("span",{style:{color:"#ffffff",fontWeight:"700"},children:Math.floor(f)})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("span",{style:{color:"#9ca3af"},children:"K/D:"}),(0,i.jsxs)("span",{style:{color:"#ffffff",fontWeight:"700"},children:[m,"/0"]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("span",{style:{color:"#9ca3af"},children:"Streak:"}),(0,i.jsxs)("span",{style:{color:"#ffffff",fontWeight:"700"},children:[m," \uD83D\uDD25"]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("span",{style:{color:"#9ca3af"},children:"Coins:"}),(0,i.jsx)("span",{style:{color:"#ffffff",fontWeight:"700"},children:x})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("span",{style:{color:"#9ca3af"},children:"Time:"}),(0,i.jsxs)("span",{style:{color:"#ffffff",fontWeight:"700"},children:[Math.floor(w/60),":",(w%60).toString().padStart(2,"0")]})]})]}):(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"3px"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"10px",fontWeight:"700",padding:"2px 4px",background:"rgba(34, 197, 94, 0.15)",borderRadius:"6px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsxs)("span",{style:{color:"#22c55e",textShadow:"0 0 6px rgba(34, 197, 94, 0.8)"},children:["$",x]}),(0,i.jsx)("span",{style:{fontSize:"6px",color:"#9ca3af",opacity:"0.7",fontWeight:"500"},children:"Net Worth"})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsxs)("span",{style:{color:"#e5e7eb",textShadow:"0 0 4px rgba(229, 231, 235, 0.8)"},children:[Math.floor(f),"m"]}),(0,i.jsx)("span",{style:{fontSize:"6px",color:"#9ca3af",opacity:"0.7",fontWeight:"500"},children:"Mass"})]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"9px",fontWeight:"600",padding:"2px 4px",background:"rgba(107, 114, 128, 0.15)",borderRadius:"6px",border:"1px solid rgba(107, 114, 128, 0.2)"},children:[(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsxs)("span",{style:{color:"#fbbf24"},children:[m,"/0"]}),(0,i.jsx)("span",{style:{fontSize:"5px",color:"#9ca3af",opacity:"0.7",fontWeight:"500"},children:"K/D"})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsx)("span",{style:{color:"#f87171"},children:m}),(0,i.jsx)("span",{style:{fontSize:"5px",color:"#9ca3af",opacity:"0.7",fontWeight:"500"},children:"Streak"})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsxs)("span",{style:{color:"#60a5fa"},children:[Math.floor(w/60),":",(w%60).toString().padStart(2,"0")]}),(0,i.jsx)("span",{style:{fontSize:"5px",color:"#9ca3af",opacity:"0.7",fontWeight:"500"},children:"Time"})]})]})]})]}),ex&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999999,pointerEvents:"auto"},children:(0,i.jsxs)("div",{style:{backgroundColor:"#1a202c",border:"3px solid #ffd700",borderRadius:L?"8px":"12px",maxWidth:L?"300px":"500px",width:"90%",padding:"0",color:"white",boxShadow:"0 0 60px rgba(255, 215, 0, 0.6)",fontFamily:'"Rajdhani", sans-serif'},children:[(0,i.jsxs)("div",{style:{padding:L?"12px":"24px",borderBottom:"2px solid #ffd700",background:"linear-gradient(45deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%)",textAlign:"center"},children:[(0,i.jsx)("div",{style:{width:L?"40px":"70px",height:L?"40px":"70px",background:"linear-gradient(45deg, #ffd700 0%, #ffb000 100%)",borderRadius:L?"8px":"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:L?"20px":"36px",margin:L?"0 auto 8px":"0 auto 16px",boxShadow:"0 0 20px rgba(255, 215, 0, 0.6)"},children:"\uD83C\uDFC6"}),(0,i.jsx)("h2",{style:{color:"#ffd700",fontSize:L?"18px":"28px",fontWeight:"700",margin:L?"0 0 4px":"0 0 8px",textTransform:"uppercase",textShadow:"0 0 15px rgba(255, 215, 0, 0.8)",letterSpacing:L?"0.5px":"1px"},children:"Cashout Successful!"}),(0,i.jsx)("p",{style:{color:"#e2e8f0",fontSize:L?"11px":"16px",margin:"0",opacity:"0.9"},children:"Congratulations! You've successfully cashed out!"})]}),(0,i.jsxs)("div",{style:{padding:L?"12px":"24px"},children:[(()=>{let e=new URLSearchParams(window.location.search).get("fee");return e&&parseFloat(e)>0?(0,i.jsxs)("div",{style:{backgroundColor:"rgba(255, 215, 0, 0.1)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",padding:L?"8px":"16px",marginBottom:L?"12px":"24px",textAlign:"center"},children:[(0,i.jsx)("div",{style:{color:"#ffd700",fontSize:L?"10px":"14px",fontWeight:"600",marginBottom:L?"4px":"8px",textTransform:"uppercase"},children:"AMOUNT RECEIVED"}),(0,i.jsxs)("div",{style:{color:"#ffffff",fontSize:L?"16px":"24px",fontWeight:"700",marginBottom:L?"2px":"4px"},children:["$",(.54*x).toFixed(2)]}),(0,i.jsxs)("div",{style:{color:"#a0aec0",fontSize:L?"8px":"12px",fontWeight:"400"},children:[(.026*x).toFixed(6)," SOL"]})]}):null})(),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:L?"8px":"16px",marginBottom:L?"12px":"24px"},children:[(0,i.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:L?"8px":"16px",borderRadius:"8px",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:L?"4px":"8px"},children:[(0,i.jsx)("div",{style:{fontSize:L?"16px":"24px"},children:"⏱️"}),(0,i.jsxs)("div",{style:{color:"#ffffff",fontSize:L?"12px":"18px",fontWeight:"700"},children:[Math.floor(w/60),"m ",w%60,"s"]}),(0,i.jsx)("div",{style:{color:"#a0aec0",fontSize:L?"8px":"12px",textTransform:"uppercase"},children:"Time Survived"})]}),(0,i.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:L?"8px":"16px",borderRadius:"8px",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:L?"4px":"8px"},children:[(0,i.jsx)("div",{style:{fontSize:L?"16px":"24px"},children:"⚔️"}),(0,i.jsx)("div",{style:{color:"#ffffff",fontSize:L?"12px":"18px",fontWeight:"700"},children:m}),(0,i.jsx)("div",{style:{color:"#a0aec0",fontSize:L?"8px":"12px",textTransform:"uppercase"},children:"Eliminations"})]})]}),(()=>{let e=new URLSearchParams(window.location.search).get("fee");return e&&parseFloat(e)>0?(0,i.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.03)",padding:L?"8px":"16px",borderRadius:"8px",textAlign:"center",marginBottom:L?"12px":"24px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,i.jsx)("div",{style:{color:"#a0aec0",fontSize:L?"8px":"12px",marginBottom:L?"4px":"8px",textTransform:"uppercase"},children:"Current Balance"}),(0,i.jsxs)("div",{style:{color:"#ffffff",fontSize:L?"12px":"18px",fontWeight:"700"},children:["$",(14.69+.54*x).toFixed(2)," / ",(.07071+.026*x).toFixed(6)," SOL"]})]}):null})(),(0,i.jsxs)("div",{style:{display:"flex",gap:L?"8px":"12px",flexDirection:"column"},children:[(0,i.jsx)("button",{onClick:()=>{eg(!1),eh(0),g(0),y(20),b(0),v(0),eA()},style:{backgroundColor:"#ffd700",border:"2px solid #ffb000",borderRadius:"8px",color:"#1a202c",fontSize:L?"14px":"16px",fontWeight:"700",padding:L?"8px 16px":"12px 24px",cursor:"pointer",transition:"all 150ms",fontFamily:'"Rajdhani", sans-serif',textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseOver:e=>{e.target.style.backgroundColor="#ffb000",e.target.style.transform="translateY(-2px)"},onMouseOut:e=>{e.target.style.backgroundColor="#ffd700",e.target.style.transform="translateY(0)"},children:"PLAY AGAIN"}),(0,i.jsx)("button",{onClick:()=>window.location.href="/",style:{backgroundColor:"transparent",border:"2px solid #a0aec0",borderRadius:"8px",color:"#a0aec0",fontSize:L?"12px":"16px",fontWeight:"600",padding:L?"8px 16px":"12px 24px",cursor:"pointer",transition:"all 150ms",fontFamily:'"Rajdhani", sans-serif',textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseOver:e=>{e.target.style.backgroundColor="#a0aec0",e.target.style.color="#1a202c"},onMouseOut:e=>{e.target.style.backgroundColor="transparent",e.target.style.color="#a0aec0"},children:"BACK TO MAIN MENU"})]})]})]})}),l&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999999,pointerEvents:"auto"},children:(0,i.jsxs)("div",{style:{backgroundColor:"#1a202c",border:"3px solid #ff4444",borderRadius:L?"8px":"12px",maxWidth:L?"300px":"500px",width:"90%",padding:"0",color:"white",boxShadow:"0 0 50px rgba(255, 68, 68, 0.5)",fontFamily:'"Rajdhani", sans-serif'},children:[(0,i.jsxs)("div",{style:{padding:L?"12px":"24px",borderBottom:"2px solid #ff4444",background:"linear-gradient(45deg, rgba(255, 68, 68, 0.1) 0%, rgba(255, 68, 68, 0.05) 100%)",textAlign:"center"},children:[(0,i.jsx)("div",{style:{width:L?"40px":"60px",height:L?"40px":"60px",background:"linear-gradient(45deg, #ff4444 0%, #cc3333 100%)",borderRadius:L?"8px":"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:L?"20px":"30px",margin:L?"0 auto 8px":"0 auto 16px"},children:"\uD83D\uDC80"}),(0,i.jsx)("h2",{style:{color:"#ff4444",fontSize:L?"20px":"32px",fontWeight:"700",margin:L?"0 0 4px":"0 0 8px",textTransform:"uppercase",textShadow:"0 0 10px rgba(255, 68, 68, 0.6)"},children:"GAME OVER"}),(0,i.jsx)("p",{style:{color:"#e2e8f0",fontSize:L?"12px":"16px",margin:"0",opacity:"0.8"},children:"You have been eliminated!"})]}),(0,i.jsxs)("div",{style:{padding:L?"12px":"24px"},children:[(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:L?"8px":"16px",marginBottom:L?"12px":"24px"},children:[(0,i.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:L?"8px":"16px",borderRadius:"8px",textAlign:"center"},children:[(0,i.jsxs)("div",{style:{color:"#68d391",fontSize:L?"16px":"24px",fontWeight:"700"},children:["$",x]}),(0,i.jsx)("div",{style:{color:"#a0aec0",fontSize:L?"10px":"14px"},children:"Final Score"})]}),(0,i.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:L?"8px":"16px",borderRadius:"8px",textAlign:"center"},children:[(0,i.jsxs)("div",{style:{color:"#60a5fa",fontSize:L?"16px":"24px",fontWeight:"700"},children:[f," KG"]}),(0,i.jsx)("div",{style:{color:"#a0aec0",fontSize:L?"10px":"14px"},children:"Final Mass"})]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:L?"8px":"12px",flexDirection:"column"},children:[(0,i.jsx)("button",{onClick:eA,style:{backgroundColor:"#68d391",border:"2px solid #48bb78",borderRadius:"8px",color:"#1a202c",fontSize:L?"14px":"18px",fontWeight:"700",padding:L?"8px 16px":"12px 24px",cursor:"pointer",transition:"all 150ms",fontFamily:'"Rajdhani", sans-serif',textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseOver:e=>{e.target.style.backgroundColor="#48bb78",e.target.style.transform="translateY(-2px)"},onMouseOut:e=>{e.target.style.backgroundColor="#68d391",e.target.style.transform="translateY(0)"},children:"PLAY AGAIN"}),(0,i.jsx)("button",{onClick:()=>{ek("Unknown Player"),ev(!0)},style:{backgroundColor:"rgba(255, 68, 68, 0.1)",border:"2px solid #ff4444",borderRadius:"8px",color:"#ff4444",fontSize:L?"11px":"14px",fontWeight:"600",padding:L?"6px 12px":"8px 16px",cursor:"pointer",transition:"all 150ms",fontFamily:'"Rajdhani", sans-serif',textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseOver:e=>{e.target.style.backgroundColor="rgba(255, 68, 68, 0.2)",e.target.style.transform="translateY(-1px)"},onMouseOut:e=>{e.target.style.backgroundColor="rgba(255, 68, 68, 0.1)",e.target.style.transform="translateY(0)"},children:"REPORT PLAYER"}),(0,i.jsx)("button",{onClick:()=>window.location.href="/",style:{backgroundColor:"transparent",border:"2px solid #a0aec0",borderRadius:"8px",color:"#a0aec0",fontSize:L?"12px":"16px",fontWeight:"600",padding:L?"8px 16px":"12px 24px",cursor:"pointer",transition:"all 150ms",fontFamily:'"Rajdhani", sans-serif',textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseOver:e=>{e.target.style.backgroundColor="#a0aec0",e.target.style.color="#1a202c"},onMouseOut:e=>{e.target.style.backgroundColor="transparent",e.target.style.color="#a0aec0"},children:"BACK TO LOBBY"})]})]})]})})]})]})}},16463:function(e,t,a){"use strict";var i=a(71169);a.o(i,"useRouter")&&a.d(t,{useRouter:function(){return i.useRouter}}),a.o(i,"useSearchParams")&&a.d(t,{useSearchParams:function(){return i.useSearchParams}})}},function(e){e.O(0,[2971,7023,1744],function(){return e(e.s=87904)}),_N_E=e.O()}]);