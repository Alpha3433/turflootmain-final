(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6901],{46601:function(){},76277:function(e,r,n){Promise.resolve().then(n.bind(n,91519))},91519:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return o}});var i=n(57437),t=n(2265),l=n(6649),s=n(80613);function o(){let{ready:e,authenticated:r,user:n,login:o,logout:a}=(0,l.s)(),{wallets:d}=(0,s.r)(),c=(0,t.useMemo)(()=>d.filter(e=>"solana"===e.chainType),[d]),p=(0,t.useMemo)(()=>c.find(e=>"solana"===e.chainType&&"privy"===e.walletClientType)||c.find(e=>"solana"===e.chainType)||null,[c]),[u,x]=(0,t.useState)(""),[f,h]=(0,t.useState)("");async function g(){if(x(""),h(""),!e)return x("Privy not ready yet.");if(!r)return x("Please sign in first.");if(!p)return x("❌ No Solana wallet found (expected an embedded wallet).");x("Found Solana wallet: ".concat(p.address," (").concat(p.walletClientType,")"));let n=new TextEncoder().encode("TurfLoot Solana Wallet Test");if("function"!=typeof p.signMessage)return x("Wallet does not expose signMessage(). Ensure you are on a recent Privy SDK.");try{let e;let r=await p.signMessage(n);r instanceof Uint8Array?e=Array.from(r).map(e=>e.toString(16).padStart(2,"0")).join(""):e="string"==typeof r?r:String(r),h(e),x("✅ Message signed successfully.")}catch(e){x("❌ signMessage failed: ".concat((null==e?void 0:e.message)||e))}}let y={padding:"10px 14px",borderRadius:"10px",border:"1px solid #ddd",cursor:"pointer",background:"#111",color:"#fff",fontSize:"14px"},b={...y,background:"#fff",color:"#111"};return(0,i.jsxs)("div",{style:{maxWidth:"820px",margin:"40px auto",padding:"24px",fontFamily:"ui-sans-serif, system-ui"},children:[(0,i.jsx)("h1",{style:{color:"#14F195",marginBottom:"8px"},children:"TurfLoot \xd7 Privy \xd7 Solana – Configuration Test"}),(0,i.jsx)("p",{style:{opacity:.7,marginBottom:"24px"},children:"This page tests if our Solana-only Privy configuration is working correctly."}),(0,i.jsxs)("section",{style:{marginTop:"12px",padding:"12px",border:"1px solid #eee",borderRadius:"12px",backgroundColor:"#f9f9f9"},children:[(0,i.jsx)("h3",{style:{marginTop:0,color:"#333"},children:"Connection Status"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Privy ready:"})," ",String(e)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Authenticated:"})," ",String(r)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"User ID:"})," ",(null==n?void 0:n.id)||"—"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Total wallets:"})," ",d.length]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Solana wallets:"})," ",c.length]}),(0,i.jsxs)("div",{style:{marginTop:"10px",display:"flex",gap:"8px",flexWrap:"wrap"},children:[r?(0,i.jsx)("button",{onClick:a,style:b,children:"\uD83D\uDD13 Sign out"}):(0,i.jsx)("button",{onClick:o,style:y,children:"\uD83D\uDD10 Sign in with Privy"}),(0,i.jsx)("button",{onClick:g,style:y,children:"\uD83E\uDDEA Run Solana Wallet Test"})]})]}),(0,i.jsxs)("section",{style:{marginTop:"16px",padding:"12px",border:"1px solid #eee",borderRadius:"12px",backgroundColor:"#f9f9f9"},children:[(0,i.jsx)("h3",{style:{marginTop:0,color:"#333"},children:"All Wallets Detected"}),0===d.length?(0,i.jsx)("div",{style:{fontStyle:"italic",color:"#666"},children:"— No wallets found —"}):(0,i.jsx)("div",{children:d.map((e,r)=>{var n;let t=null===(n=e.address)||void 0===n?void 0:n.startsWith("0x"),l=p&&e.address===p.address;return(0,i.jsxs)("div",{style:{lineHeight:"1.6",padding:"8px",margin:"4px 0",borderRadius:"6px",backgroundColor:t?"#ffe6e6":"#e6ffe6",border:l?"2px solid #14F195":"1px solid transparent"},children:[(0,i.jsxs)("div",{style:{fontSize:"12px",fontFamily:"monospace",wordBreak:"break-all"},children:[t?"❌ EVM: ":"✅ SOL: ",e.address]}),(0,i.jsxs)("div",{style:{fontSize:"11px",opacity:.8,marginTop:"2px"},children:[(0,i.jsx)("b",{children:"Chain:"})," ",e.chainType," | ",(0,i.jsx)("b",{children:"Type:"})," ",e.walletClientType,l&&(0,i.jsx)("span",{style:{marginLeft:"8px",padding:"2px 6px",borderRadius:"4px",background:"#14F195",color:"white",fontSize:"10px"},children:"DEFAULT"}),t&&(0,i.jsx)("span",{style:{marginLeft:"8px",padding:"2px 6px",borderRadius:"4px",background:"#ff4444",color:"white",fontSize:"10px"},children:"SHOULD NOT EXIST!"})]})]},r)})})]}),(0,i.jsxs)("section",{style:{marginTop:"16px",padding:"12px",border:"1px solid #eee",borderRadius:"12px",backgroundColor:"#f9f9f9"},children:[(0,i.jsx)("h3",{style:{marginTop:0,color:"#333"},children:"Test Results"}),(0,i.jsx)("div",{style:{marginBottom:"8px",padding:"8px",borderRadius:"6px",backgroundColor:u.includes("✅")?"#e6ffe6":u.includes("❌")?"#ffe6e6":"#fff"},children:u||'— Click "Run Solana Wallet Test" to start —'}),f&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Signature (proves wallet control):"}),(0,i.jsx)("textarea",{readOnly:!0,value:f,style:{width:"100%",height:"120px",fontFamily:"monospace",fontSize:"11px",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]})]}),(0,i.jsxs)("section",{style:{marginTop:"16px",padding:"12px",border:"1px solid #14F195",borderRadius:"12px",backgroundColor:"#f0fff8"},children:[(0,i.jsx)("h3",{style:{marginTop:0,color:"#14F195"},children:"Expected Results for Correct Configuration:"}),(0,i.jsxs)("ul",{style:{lineHeight:"1.6",color:"#333"},children:[(0,i.jsxs)("li",{children:["✅ ",(0,i.jsx)("b",{children:"Only Solana wallets"})," should appear (no EVM/0x addresses)"]}),(0,i.jsxs)("li",{children:["✅ ",(0,i.jsx)("b",{children:"Default wallet"})," should be chainType: 'solana', walletClientType: 'privy'"]}),(0,i.jsxs)("li",{children:["✅ ",(0,i.jsx)("b",{children:"Signing test"})," should succeed without errors"]}),(0,i.jsxs)("li",{children:["❌ ",(0,i.jsx)("b",{children:"If you see EVM wallets"}),", the Privy configuration is still creating them"]})]})]}),(0,i.jsxs)("div",{style:{marginTop:"20px",padding:"12px",backgroundColor:"#f8f8f8",borderRadius:"8px",fontSize:"13px",opacity:.8},children:[(0,i.jsx)("b",{children:"Debug Info:"}),(0,i.jsx)("br",{}),"• Use a brand new email/account to test first-time user wallet creation",(0,i.jsx)("br",{}),"• Check browser console for additional Privy debug logs",(0,i.jsx)("br",{}),"• If EVM wallets still appear, check Privy Dashboard settings",(0,i.jsx)("br",{}),"• Back to main app: ",(0,i.jsx)("a",{href:"/",style:{color:"#14F195"},children:"TurfLoot Home"})]})]})}},6649:function(e,r,n){"use strict";n.d(r,{s:function(){return p}});var i=n(2265),t=n(72336),l=n(10280),s=n(79714);let o=async({emitPrivyEvent:e,getAccessToken:r,initializeWalletProxy:n,refreshUser:i,user:t},{privateKey:o,chainType:a})=>{if(!t)throw e("linkAccount","onError",s.sX.MUST_BE_AUTHENTICATED,{linkMethod:"siwe"}),new s.dx("User must be authenticated before linking an account.");let[d,c]=await Promise.all([r(),n(15e3)]);if(!c||!d)throw e("linkAccount","onError",s.sX.MUST_BE_AUTHENTICATED,{linkMethod:"siwe"}),new s.dx("User must be authenticated before linking an account.");await c.importWallet({privateKey:o,accessToken:d,chainType:a});let p=await i(),u="solana"===a?(0,l.Ry)(p):(0,l.Nc)(p);if(!u)throw e("createWallet","onError",s.sX.UNKNOWN_EMBEDDED_WALLET_ERROR),Error("Failed to import wallet");return e("createWallet","onSuccess",u),u};var a=n(74717),d=n(60052);let c=()=>{let{getAccessToken:e,user:r}=(0,t.b)(),{refreshUser:n,initializeWalletProxy:l}=(0,d.u)(),s=(0,a.rN)();return{importWallet:(0,i.useCallback)(({privateKey:i})=>o({getAccessToken:e,user:r,initializeWalletProxy:l,refreshUser:n,emitPrivyEvent:s},{privateKey:i,chainType:"ethereum"}),[r,e,n,l,s])}},p=()=>{let{importWallet:e}=c();return{...(0,i.useContext)(t.N),importWallet:e}}},80613:function(e,r,n){"use strict";n.d(r,{r:function(){return l},t:function(){return t}});var i=n(2265);let t=(0,i.createContext)(null);function l(){let e=(0,i.useContext)(t);return null===e?(console.warn("`useWallets` was called outside the PrivyProvider component"),{wallets:[],ready:!1}):e}}},function(e){e.O(0,[2707,2971,7023,1744],function(){return e(e.s=76277)}),_N_E=e.O()}]);